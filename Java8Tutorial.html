<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="Asciidoctor 0.1.4">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="A comprehensive tutorial on Java 8">
<meta name="keywords" content="java 8, lambda expressions, functional interfaces, tutorial">
<title>Java 8 Tutorial Day</title>
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/3.2.1/css/font-awesome.min.css">
<link rel="stylesheet" href="./asciidoctor-pygments.css">
</head>
<body class="book">
<div id="header">
<h1><em>Java 8 Tutorial Day</em></h1>
<span id="author" class="author">Adib Saikali</span><br>
<span id="email" class="email"><a href="mailto:adib@programmingmastery.com">adib@programmingmastery.com</a></span><br>
<span id="revnumber">version 1.1,</span>
<span id="revdate">2014-05-27</span>
<br><span id="revremark">Hosted by the Toronto Java Users Group</span>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#Overview">1. Overview</a></li>
<li><a href="#_lambda_expressions">2. Lambda Expressions</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_definition">2.1. Definition</a></li>
<li><a href="#_java_8_lambda_basics">2.2. Java 8 Lambda Basics</a></li>
<li><a href="#_coding_exercise_1">2.3. Coding Exercise #1</a></li>
<li><a href="#_functional_interfaces">2.4. Functional Interfaces</a></li>
<li><a href="#_coding_exercise_2">2.5. Coding Exercise 2</a></li>
<li><a href="#_capturing_values">2.6. Capturing values</a></li>
<li><a href="#_coding_exercise_3">2.7. Coding Exercise #3</a></li>
<li><a href="#_method_references">2.8. Method References</a></li>
<li><a href="#_coding_exercise_4">2.9. Coding Exercise #4</a></li>
<li><a href="#_lambda_summary">2.10. Lambda Summary</a></li>
</ul>
</li>
<li><a href="#_default_methods">3. Default Methods</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_definition_2">3.1. Definition</a></li>
<li><a href="#_default_method_semantics">3.2. Default Method Semantics</a></li>
<li><a href="#_coding_exercise_5">3.3. Coding Exercise #5</a></li>
</ul>
</li>
<li><a href="#_collections_enhancements">4. Collections Enhancements</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_default_methods_on_base_interfaces">4.1. Default Methods on Base Interfaces</a></li>
<li><a href="#_coding_exercise_6">4.2. Coding Exercise #6</a></li>
</ul>
</li>
<li><a href="#_streams">5. Streams</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_streams_overview">5.1. Streams Overview</a></li>
<li><a href="#_coding_exercise_stream_source">5.2. Coding Exercise Stream Source</a></li>
<li><a href="#_coding_exercise_stream_terminal">5.3. Coding Exercise Stream Terminal</a></li>
<li><a href="#_collectors_coding_example">5.4. Collectors Coding Example</a></li>
</ul>
</li>
<li><a href="#_annotation_reflection_enhancements">6. Annotation &amp; Reflection Enhancements</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_coding_exercise">6.1. Coding Exercise</a></li>
<li><a href="#_generics_enhancements">6.2. Generics enhancements</a></li>
</ul>
</li>
<li><a href="#_coding_exercise_7">7. Coding Exercise</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_concurrency_enhancements">7.1. Concurrency enhancements</a></li>
</ul>
</li>
<li><a href="#_coding_exercise_8">8. Coding Exercise</a></li>
<li><a href="#_date_and_time_apis">9. Date and Time apis</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_api_tour">9.1. Api Tour</a></li>
<li><a href="#_coding_exercise_9">9.2. Coding Exercise</a></li>
</ul>
</li>
<li><a href="#_spring_4_0_examples">10. Spring 4.0 Examples</a></li>
<li>
<ul class="sectlevel2">
<li><a href="#_coding_exercise_10">10.1. Coding Exercise</a></li>
</ul>
</li>
<li><a href="#_glossary">11. Glossary</a></li>
<li><a href="#_references">12. References</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<div class="quoteblock">
<blockquote>
&#8220;Live like you are going to die tomorrow, learn like you are going to live forever&#8221;
</blockquote>
<div class="attribution">
&#8212; Mahatma Gandhi
</div>
</div>
<div style="page-break-after: always;"></div>
<h2 id="_colophon" class="discrete">Colophon</h2>
<div class="paragraph">
<p>&#169; 2014 Programming Mastery Inc.</p>
</div>
<div class="paragraph">
<p>All rights reserved. No part of this publication may be reproduced, stored or transmitted, in any form or by any means, without the prior permission in writing of the copyright owner. Inquiries concerning reproduction should be sent to <a href="mailto:info@programmingmastery.com">info@programmingmastery.com</a>.</p>
</div>
<div class="paragraph">
<p>The use of registered names, trademarks etc. in this publication does not imply, even in the absence of a specific statement, that such names are exempt from the relevant laws and regulations and therefore free for general use.</p>
</div>
<div class="paragraph">
<p>The publisher makes no representation, express or implied, with regard to the accuracy of the information contained in this book and cannot accept any legal responsibility or liability for any errors or omissions that may be made.</p>
</div>
<div class="paragraph">
<p>Version: 1.1</p>
</div>
<div class="paragraph">
<p>Version Date: 2014-05-27</p>
</div>
<div class="paragraph">
<p>Version Notes: Hosted by the Toronto Java Users Group</p>
</div>
<div style="page-break-after: always;"></div>
<h2 id="_sponsors" class="discrete">Sponsors</h2>
<div class="imageblock">
<div class="content">
<img src="images/ProgrammingMasteryLogo-L.png" alt="Programming Mastery Logo">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Pivotal_Logo_green.png" alt="Pivotal Logo">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/HazelcastLogo.png" alt="HazelCast Logo">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/logo_JB_tagline.png" alt="JetBrais Logo">
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="Overview"><a class="anchor" href="#Overview"></a>1. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This tutorial is for Java developers that want to learn the new features of Java 8. The tutorial teaches Java 8 features through numerous bite sized runnable code examples.</p>
</div>
<div class="paragraph">
<p>To get the full value of the tutorial start from the beginning; type every example program you see along the way and run it. Typing the example programs will help you quickly get familiar with the Java 8 syntax and get you familiar with complier errors that you will run into when working with Java 8. You will also be able to experiment and ask questions as you type the example programs.</p>
</div>
<div class="paragraph">
<p>Many Java 8 tutorials and presentations start by selling you on the value of Java 8 features. If you are reading this tutorial we assume that you are already sold on Java 8. Therefore we will focus the tutorial on getting you up to speed with Java 8. At the end of the tutorial we will focus on answering the why questions such as &#8220;Why are the features of Java 8 important?&#8221;. So if you want to know &#8220;Why are lambda expressions so important and useful?&#8221; work your way to the end of the tutorial and you will understand the answers to why questions much more deeply.</p>
</div>
<div class="ulist">
<div class="title">Plan</div>
<ul>
<li>
<p>Write numerous small programs that use Java 8 features</p>
</li>
<li>
<p>Develop a deep understanding of Java 8 features</p>
</li>
<li>
<p>Have fun learning Java 8</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Java 8 Development Kit</p>
</li>
<li>
<p>Java 8 Capable IDE</p>
</li>
<li>
<p>Comfort writing Java 5, 6 or 7 code</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">About Adib Saikali</div>
<ul>
<li>
<p>Java developer since 2000</p>
</li>
<li>
<p>Enjoy all forms of programming from low level C and assembly all the way to JavaScript in web browsers</p>
</li>
<li>
<p>Passionate about technology and entrepreneurship</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lambda_expressions"><a class="anchor" href="#_lambda_expressions"></a>2. Lambda Expressions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_definition"><a class="anchor" href="#_definition"></a>2.1. Definition</h3>
<div class="paragraph lead">
<p>Lambda expressions are a way to define anonymous functions (functions that have no name). Since lambdas are expressions they can be assigned to variables, passed to functions, and returned from functions.</p>
</div>
<div class="paragraph">
<p>Lambda expressions form the basis of the functional programming paradigm which has a rich set of design patterns and practices. Functional programming constructs such as lambdas make writing parallel code easier. Lambdas are to functional programming what classes are to object oriented programming.</p>
</div>
<div class="paragraph">
<p>The mathematical theory of lambda calculus was developed in the 1930s by Alonzo Church and found its way into programming languages in the 1960s. Most major programming languages have support for lambda expressions including C++, C#, JavaScript, Python, Ruby &#8230; etc with the release of Java 8 we finally have lambda expressions in the Java programming language.</p>
</div>
<div class="paragraph">
<p>If you have not worked with Lambda expressions in other programming languages you will find that learning lambda expressions in Java has two parts. Fist you need to learn the syntax and semantics of how Java implements lambda expressions. Second, you need to learn how lambda expressions form the basis of the functional programming paradigm.</p>
</div>
<div class="paragraph">
<p>Once you master the concept of lambda expressions in one programming language using lambda expressions in another programming language will be a simple matter of learning new syntax. For example if you were to learn a new programming language that you have never used before you don&#8217;t have to relearn the concept of variable, array, loop, class, object &#8230; etc. Similarly once you learn the concepts of lambda expressions you will be able to use it everywhere.</p>
</div>
<div class="ulist">
<div class="title">Lambda Expressions</div>
<ul>
<li>
<p>Define anonymous functions</p>
</li>
<li>
<p>Can be assigned to variables</p>
</li>
<li>
<p>Can be passed to functions</p>
</li>
<li>
<p>Can be returned from functions</p>
</li>
<li>
<p>From the basis of the functional programming paradigm</p>
</li>
<li>
<p>Make parallel programming easier</p>
</li>
<li>
<p>Have been supported by numerous programming languages for decades</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>There are two distinct things to learn</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The general concept of lambdas expressions</p>
</li>
<li>
<p>The Java 8 implementation of lambda expressions</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If this is your first encounter with Lambda expressions recognize that the learning curve associated with lambdas will be steeper for you than for some one who has already learned lambda expressions in another programming language.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_java_8_lambda_basics"><a class="anchor" href="#_java_8_lambda_basics"></a>2.2. Java 8 Lambda Basics</h3>
<div class="paragraph lead">
<p>We will start by examining some very simple usages of lambda expressions to get familiar with the syntax and the concept of lambda expressions.</p>
</div>
<div class="paragraph">
<p>Consider the following simple program that prints out 1 &#8230; 5 to the console.</p>
</div>
<div class="listingblock">
<div class="title">LambdaSyntaxExample1.java</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_01</span><span class="tok-o">.</span><span class="tok-na">syntax</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaSyntaxExample1</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span> <i class="conum" data-value="1"></i><b>(1)</b>
				<span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">)</span>  <i class="conum" data-value="2"></i><b>(2)</b>
				<span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>forEach</code> is a method that accepts a function as its input and calls
the function for each value in the list.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>x -&gt; System.out.println(x)</code> is lambda expression that defines an anonymous function with one parameter named <code>x</code> of type <code>Integer</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="pygments highlight"><code>1
2
3
4
5</code></pre>
</div>
</div>
<div class="paragraph">
<p>Think of a lambda expression as having a two stage lifecycle.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Convert the lambda expression to a function</p>
</li>
<li>
<p>Call the generated function</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">)</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>is translated to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">generatedNameOfLambdaFunction</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">x</span><span class="tok-o">){</span>
  <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span>
<span class="tok-o">}</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>We now need to call the lambda function. In the implementation of the <code>forEach()</code> method imagine code that looks like this.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kd">public</span> <span class="tok-n">interface</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">Consumer</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-o">{</span>
  <span class="tok-kt">void</span> <span class="tok-nf">accept</span><span class="tok-o">(</span><span class="tok-n">T</span> <span class="tok-n">t</span><span class="tok-o">);</span>
<span class="tok-o">}</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ArrayList</span> <span class="tok-o">{</span> <i class="conum" data-value="2"></i><b>(2)</b>

  <span class="tok-kd">private</span> <span class="tok-n">Object</span><span class="tok-o">[]</span> <span class="tok-n">items</span><span class="tok-o">;</span>

  <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">forEach</span><span class="tok-o">(</span><span class="tok-n">Consumer</span> <span class="tok-n">function</span><span class="tok-o">)</span> <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="tok-o">{</span>
      <span class="tok-k">for</span><span class="tok-o">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span><span class="tok-o">=</span><span class="tok-mi">0</span><span class="tok-o">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">items</span><span class="tok-o">.</span><span class="tok-na">length</span><span class="tok-o">;</span> <span class="tok-n">i</span><span class="tok-o">++)</span>
      <span class="tok-o">{</span>
         <span class="tok-n">function</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-n">items</span><span class="tok-o">[</span><span class="tok-n">i</span><span class="tok-o">]);</span> <i class="conum" data-value="4"></i><b>(4)</b>
      <span class="tok-o">}</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Consumer</code> is a regular Java interface. It models the idea of doing something with the input where the caller of the <code>accept()</code> method does not care about what <code>accept()</code> does with the input.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>ArrayList</code> is a plain old java object. Notice that it does <em>not</em> use any special syntax.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>forEach</code> method models the concept of an function object using the <code>Consumer</code> interface.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>accept</code> method is invoked on each item in the list.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>So the original code example we looked at</strong></p>
</div>
<div class="listingblock">
<div class="title">LambdaSyntaxExample1.java</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_01</span><span class="tok-o">.</span><span class="tok-na">syntax</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaSyntaxExample1</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span> <i class="conum" data-value="1"></i><b>(1)</b>
				<span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">)</span>  <i class="conum" data-value="2"></i><b>(2)</b>
				<span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>translate to</strong></p>
</div>
<div class="listingblock">
<div class="title">Lambda to anonymous inner class translation</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaSyntaxExample1</span> <span class="tok-o">{</span>
  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

    <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span> <span class="tok-k">new</span> <span class="tok-n">Consumer</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
      <span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">accept</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">x</span><span class="tok-o">)</span> <span class="tok-o">{</span>
          <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span>
      <span class="tok-o">}</span>
    <span class="tok-o">});</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Or it could be translated to</strong></p>
</div>
<div class="listingblock">
<div class="title">lambda to a static method translation</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaSyntaxExample1</span> <span class="tok-o">{</span>
  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
    <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

    <span class="tok-n">Consumer</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">lambdaInstance</span> <span class="tok-o">=</span> <span class="tok-n">Generator</span><span class="tok-o">.</span><span class="tok-na">generateInstance</span><span class="tok-o">(</span> <span class="tok-n">Consumer</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">,</span> <span class="tok-n">LambdaSyntaxExample1</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">,</span> <span class="tok-s">&quot;lambda1Method&quot;</span><span class="tok-o">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">lambdaInstance</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>

  <span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">lamda1Method</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">x</span><span class="tok-o">)</span>
  <span class="tok-o">{</span>
      <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Generator.generateInstance</code> is a hypothetical object that can dynamically generate a new instance of the specified interface <code>LambdaSyntaxExample</code> and automatically implement the <code>accept()</code> method by calling the static method <code>lambda1Method()</code> on the class <code>LambdaSyntaxExample1</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The details of how lambda expressions are converted to functions instances is an implementation detail that is not relevant for understanding and using lambda expressions. Different translation techniques have different performance characteristics and the Java Language specification does not dictate a translation mechanism. While the implementation details will change form release to release the semantics of lambdas will not change.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The Java One 2013 talk &#8220;Lambda: A peek under the hood&#8221; digs into the details of how Lambdas are implemented in Java 8. See <a href="#UnderTheHood">[UnderTheHood]</a> for a link to watch the presentation.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="ulist">
<div class="title">There are two stages in the lifecycle of a lambda expression</div>
<ul>
<li>
<p>Converting the lambda expression to a function instance</p>
</li>
<li>
<p>Invoking the function instance</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The details of how lambda expressions are converted to functions instances is an implementation detail that is not relevant for understanding and using lambda expressions.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_coding_exercise_1"><a class="anchor" href="#_coding_exercise_1"></a>2.3. Coding Exercise #1</h3>
<div class="paragraph lead">
<p>We have taken a first pass at learning the concept of lambda expressions and how Java 8 implements them. It&#8217;s time to type in some code and get familiar with the Java 8 lambda syntax.</p>
</div>
<div class="ulist">
<div class="title">Setup a project</div>
<ul>
<li>
<p>Create Java 8 Project in your favourite IDE call it <code>Java8Tutorial</code></p>
</li>
<li>
<p>Create a package <code>com.example.java8.lambda._01.syntax</code></p>
</li>
<li>
<p>Type in the code from the following examples</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Make sure to use the content assist capabilities and shortcuts of your IDE to implement the samples below. Using a modern IDE with proper shortcuts it should only take about 15 minutes to get through the examples below.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Create and run LambdaSyntaxExample1.java</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_01</span><span class="tok-o">.</span><span class="tok-na">syntax</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaSyntaxExample1</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span> <i class="conum" data-value="1"></i><b>(1)</b>
				<span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">)</span>  <i class="conum" data-value="2"></i><b>(2)</b>
				<span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is the most compact way to write a lambda expression, all the subsequent examples will add syntax elements that the compiler can infer automatically.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Create and run LambdaSyntaxExample2.java</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_01</span><span class="tok-o">.</span><span class="tok-na">syntax</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaSyntaxExample2</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
			<span class="tok-n">x</span> <span class="tok-o">=</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">10</span><span class="tok-o">;</span>
			<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span>
		<span class="tok-o">});</span>

	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a lambda expression has a body which can have multiple lines of code. If there is only one line of code the <code>{}</code> are optional.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Create and run LambdaSyntaxExample3.java</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_01</span><span class="tok-o">.</span><span class="tok-na">syntax</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaSyntaxExample3</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">((</span><span class="tok-n">x</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
			<span class="tok-kt">int</span> <span class="tok-n">y</span> <span class="tok-o">=</span> <span class="tok-n">x</span> <span class="tok-o">/</span> <span class="tok-mi">2</span><span class="tok-o">;</span> <i class="conum" data-value="2"></i><b>(2)</b>
			<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">y</span><span class="tok-o">);</span>
		<span class="tok-o">});</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The input variable to a lambda expression can be surrounded by <code>()</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The body of a lambda expression just like any other java code block you can define variables.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Create and run LambdaSyntaxExample4.java</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_01</span><span class="tok-o">.</span><span class="tok-na">syntax</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaSyntaxExample4</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">((</span><span class="tok-n">Integer</span> <span class="tok-n">x</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
			<span class="tok-n">x</span> <span class="tok-o">=</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">10</span><span class="tok-o">;</span>
			<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span>
		<span class="tok-o">});</span>

	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You can specify the types of lambda expression variables <code>(Integer x)</code>. The Java 8 compiler uses type inference to figure out that x is an Integer this is why <code>(Integer x)</code> can be written as just <code>x</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Create and run LambdaSyntaxExample5.java</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_01</span><span class="tok-o">.</span><span class="tok-na">syntax</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.function.Consumer</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaSyntaxExample5</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">Consumer</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">consumer</span> <span class="tok-o">=</span> <span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">print</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">consumer</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You can assign a lambda expression to a regular Java object reference. One of the key characteristics of a lambda expressions is that they can be assigned to variables like other primitive and object types.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Create and run LambdaSyntaxExample6.java</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_01</span><span class="tok-o">.</span><span class="tok-na">syntax</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.function.Consumer</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaSyntaxExample6</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">Consumer</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">consumer</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">x</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
			<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">print</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span>
		<span class="tok-o">};</span>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">consumer</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>adding in types for the lambda expression parameters, and curly braces to make the lambda look more like a regular method declaration.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The complier type inference allows for compact lambda expressions. While learning lambdas write them in whatever way helps you best understand them.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_functional_interfaces"><a class="anchor" href="#_functional_interfaces"></a>2.4. Functional Interfaces</h3>
<div class="paragraph lead">
<p>What is the data type of A Lambda Expression? That is the question we will answer in this section.</p>
</div>
<div class="paragraph">
<p>Many programming languages that use lambdas define a function data type in the way that Java defines int, char, arrays, classes &#8230; etc as data types. Adding a new function data type to Java was considered and rejected by the Java 8 Lambda design team because it was infeasible for a variety of reasons. See <a href="#UnderTheHood">[UnderTheHood]</a> for the details.</p>
</div>
<div class="paragraph">
<p>A common way to represent a function in all versions of java is to use an interface with a single method. There are many examples of such interfaces in the JDK and spring.</p>
</div>
<div class="paragraph">
<p>For example <code>java.lang</code> contains</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Comparable</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">compareTo</span><span class="tok-o">(</span><span class="tok-n">T</span> <span class="tok-n">o</span><span class="tok-o">);</span>
<span class="tok-o">}</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Runnable</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kd">abstract</span> <span class="tok-kt">void</span> <span class="tok-nf">run</span><span class="tok-o">();</span>
<span class="tok-o">}</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>Spring frameworks provides a bunch of template such as <code>JdbcTemplate</code> and <code>TransactionTemplate</code> that rely on interfaces such as.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">TransactionCallback</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>
  <span class="tok-n">T</span> <span class="tok-nf">doInTransaction</span><span class="tok-o">(</span><span class="tok-n">TransactionStatus</span> <span class="tok-n">status</span><span class="tok-o">);</span>
<span class="tok-o">}</span>
</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Java 8 refers to interfaces with a single method as functional interfaces.</strong></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Java 8 added special compiler support <code>@FunctionalInterface</code> to indicate that an interface is intended to be functional interface and should only have one method defined. It produces an error if an interface has more than one method.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-nd">@FunctionalInterface</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">PasswordEncoder1</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">encode</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">password</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">salt</span><span class="tok-o">);</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>compiles successfully because there is only one method defined on the interface.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-nd">@FunctionalInterface</span>
<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">PasswordEncoder2</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">encode</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">password</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">salt</span><span class="tok-o">);</span>
	<span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">doSomethingElse</span><span class="tok-o">();</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Produces a compiler error <code>Invalid <em>@FunctionalInterface</em> annotation; PasswordEncoder2 is not a functional interface</code> because it has more than one method defined.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>@FunctionalInterface</code> is an optional annotation. Any interface that has one method is considered a functional interface by Java 8 weather the interface was compiled by a Java 1.0 complier or a Java 8 compiler.</p>
</div>
<div class="paragraph">
<p>This means that Java 8 lambdas will work nicely with older libraries that use functional interfaces without any need to recompile or modify those libraries.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In Java 8 the type of a Lambda expression is the same as the function in the functional interface that the lambda expression is assigned to.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Consider the following functional interface that defines a single method that takes in a password and a slat and encodes the password using a hash function for storage.</p>
</div>
<div class="listingblock">
<div class="title">PasswordEncoder1</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_02</span><span class="tok-o">.</span><span class="tok-na">interfaces</span><span class="tok-o">;</span>

<span class="tok-nd">@FunctionalInterface</span>
<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">PasswordEncoder1</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">encode</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">password</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">salt</span><span class="tok-o">);</span>
<span class="tok-o">}</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>Consider the following lambda expression</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-n">PasswordEncoder1</span> <span class="tok-n">upperCase</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">password</span><span class="tok-o">,</span> <span class="tok-n">salt</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-n">password</span><span class="tok-o">.</span><span class="tok-na">toLowerCase</span><span class="tok-o">();</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>When the compiler looks at the lambda expression and at the functional interface that it is being assigned to it determines that the lambda expression is providing an implementation of the method <code>public String encode(String password, String salt)</code> therefore password and salt in the lambda expression must be of type String.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>By using functional interfaces the developers of Java 8 lambda expressions were able to enable the usage of Lambdas with all existing java code bases.</p>
</div>
<div class="paragraph">
<p>Java 8 includes a new package <code>java.util.function</code> which contains many general purpose functional interfaces that can be used in a variety of situations.</p>
</div>
<div class="paragraph">
<p>For example it is common to want a lambda expression</p>
</div>
<div class="ulist">
<ul>
<li>
<p>for a function that takes one parameter and returns nothing can be represented with  <code>java.util.function.Consumer</code></p>
</li>
<li>
<p>for a function that takes one parameter and returns one result which can be represented with <code>java.util.function.Function</code></p>
</li>
<li>
<p>for a function that takes no parameters and returns a result <code>java.util.function.supplier</code> is provided</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-nd">@FunctionalInterface</span>
<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Supplier</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>
    <span class="tok-n">T</span> <span class="tok-nf">get</span><span class="tok-o">();</span>
<span class="tok-o">}</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>Allows you to define your own function that take the functional interfaces as parameters. for example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">(</span><span class="tok-n">Supplier</span><span class="tok-o">&lt;</span><span class="tok-n">BigDecimal</span><span class="tok-o">&gt;</span> <span class="tok-n">taxCaculator</span><span class="tok-o">)</span>
<span class="tok-o">{</span>
	<span class="tok-n">BigDecimal</span> <span class="tok-n">tax</span> <span class="tok-o">=</span> <span class="tok-n">taxCalculator</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">():</span>
<span class="tok-o">}</span>

<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomethingElse</span><span class="tok-o">(</span><span class="tok-n">Consumer</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">consumer</span><span class="tok-o">)</span>
<span class="tok-o">{</span>
   <span class="tok-n">String</span> <span class="tok-n">str</span> <span class="tok-o">=</span> <span class="tok-s">&quot;get this string from some where&quot;</span><span class="tok-o">;</span>
   <span class="tok-n">consumer</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-n">str</span><span class="tok-o">);</span>
   <span class="tok-c1">// do some more stuff</span>
<span class="tok-o">}</span>
</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Use the functional interfaces in java.util.function for common situations instead of defining your own functions.</strong></p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_coding_exercise_2"><a class="anchor" href="#_coding_exercise_2"></a>2.5. Coding Exercise 2</h3>
<div class="paragraph lead">
<p>Now that we learned the Java 8 concept of Functional interfaces lets put it into practice by writing our functional interface, and re-using the existing functional interfaces in the JDK.</p>
</div>
<div class="paragraph">
<div class="title">Setup</div>
<p>Create a package called <code>com.example.java8.lambda._02.interfaces</code> in your Java8Tutorial project.</p>
</div>
<div class="listingblock">
<div class="title">Create PasswordEncoder1.java in the new package</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_02</span><span class="tok-o">.</span><span class="tok-na">interfaces</span><span class="tok-o">;</span>

<span class="tok-nd">@FunctionalInterface</span>
<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">PasswordEncoder1</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">encode</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">password</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">salt</span><span class="tok-o">);</span>
<span class="tok-o">}</span>
</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Try adding a second method definition in PasswordEncoder1 such as <code>public void doSomething()</code> and notice the error that the java compiler produces.</p>
</li>
<li>
<p>Comment out the <code>@FunctionalInterface</code> annotation and notice that the compiler error disappears.</p>
</li>
<li>
<p>Delete the extra method and put back the <code>@FunctionalInterface</code> annotation back. It is a best practice to user <code>@FunctionalInterface</code> for any functional interfaces that you create.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To accept a lambda expression as a parameter to a method or return it from a method or to assign it a variable use functional interface type that is compatible with the lambda expression.</p>
</div>
<div class="listingblock">
<div class="title">Create FunctionalInterfaceExample1 and run it.</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_02</span><span class="tok-o">.</span><span class="tok-na">interfaces</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">FunctionalInterfaceExample1</span> <span class="tok-o">{</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">(</span><span class="tok-n">PasswordEncoder1</span> <span class="tok-n">encoder</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">String</span> <span class="tok-n">salted</span> <span class="tok-o">=</span> <span class="tok-n">encoder</span><span class="tok-o">.</span><span class="tok-na">encode</span><span class="tok-o">(</span><span class="tok-s">&quot;abc&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;123&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">salted</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-n">PasswordEncoder1</span> <span class="tok-nf">returnSomething</span><span class="tok-o">()</span> <span class="tok-o">{</span>
		<span class="tok-k">return</span> <span class="tok-o">(</span><span class="tok-n">password</span><span class="tok-o">,</span> <span class="tok-n">salt</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-n">password</span><span class="tok-o">.</span><span class="tok-na">toUpperCase</span><span class="tok-o">();</span>
	<span class="tok-o">}</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">PasswordEncoder1</span> <span class="tok-n">noOp</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">password</span><span class="tok-o">,</span> <span class="tok-n">salt</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
			<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">password</span><span class="tok-o">);</span>
			<span class="tok-k">return</span> <span class="tok-n">password</span><span class="tok-o">;</span>
		<span class="tok-o">};</span>

		<span class="tok-n">doSomething</span><span class="tok-o">(</span><span class="tok-n">noOp</span><span class="tok-o">);</span>
		<span class="tok-n">doSomething</span><span class="tok-o">(</span><span class="tok-n">returnSomething</span><span class="tok-o">());</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>Instead of defining our functional interface <code>PasswordEncoder1</code> which takes two string and returns a String we could have used the standard functional interface <code>java.util.function.BiFunction&lt;T,U,V&gt;</code></p>
</div>
<div class="listingblock">
<div class="title">Create FunctionalInterfaceExample2 and run it.</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_02</span><span class="tok-o">.</span><span class="tok-na">interfaces</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.function.BiFunction</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">FunctionalInterfaceExample2</span> <span class="tok-o">{</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">(</span><span class="tok-n">PasswordEncoder1</span> <span class="tok-n">encoder</span><span class="tok-o">)</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">String</span> <span class="tok-n">salted</span> <span class="tok-o">=</span> <span class="tok-n">encoder</span><span class="tok-o">.</span><span class="tok-na">encode</span><span class="tok-o">(</span><span class="tok-s">&quot;abc&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;123&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">salted</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">doOther</span><span class="tok-o">(</span><span class="tok-n">BiFunction</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">encoder</span><span class="tok-o">)</span> <span class="tok-o">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
		<span class="tok-n">String</span> <span class="tok-n">salted</span> <span class="tok-o">=</span> <span class="tok-n">encoder</span><span class="tok-o">.</span><span class="tok-na">apply</span><span class="tok-o">(</span><span class="tok-s">&quot;abc&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;123&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">salted</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">doSomething</span><span class="tok-o">((</span><span class="tok-n">password</span><span class="tok-o">,</span> <span class="tok-n">salt</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-n">password</span><span class="tok-o">.</span><span class="tok-na">toUpperCase</span><span class="tok-o">());</span> <i class="conum" data-value="3"></i><b>(3)</b>
		<span class="tok-n">doOther</span><span class="tok-o">((</span><span class="tok-n">password</span><span class="tok-o">,</span> <span class="tok-n">salt</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-n">password</span><span class="tok-o">.</span><span class="tok-na">toUpperCase</span><span class="tok-o">());</span> <i class="conum" data-value="3"></i><b>(3)</b>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>this is same method as the previous example no change to it.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This method accepts a function that takes 2 strings and return as string.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Notice that the same lambda expression is being passed into the <code>doSomethig()</code> and <code>doOther()</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>One of the design issues you will encounter when working with Lambda is weather you should define your own functional interface or use an existing functional interface from <code>java.util.function</code> the guide lines for this type of design question will emerge as Java 8 usage experience accumulates in the community. I guess Effective Java 3rd edition whenever it is published will deal with this in an authoritative way.</p>
</div>
<div class="listingblock">
<div class="title">Create FunctionalInterfaceExample3 and run it.</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_02</span><span class="tok-o">.</span><span class="tok-na">interfaces</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.security.MessageDigest</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">FunctionalInterfaceExample3</span> <span class="tok-o">{</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">Exception</span> <span class="tok-o">{</span>

		<span class="tok-n">PasswordEncoder1</span> <span class="tok-n">md5Encoder</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">password</span><span class="tok-o">,</span> <span class="tok-n">salt</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
			<span class="tok-n">MessageDigest</span> <span class="tok-n">md</span> <span class="tok-o">=</span> <span class="tok-n">MessageDigest</span><span class="tok-o">.</span><span class="tok-na">getInstance</span><span class="tok-o">(</span><span class="tok-s">&quot;MD5&quot;</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>
			<span class="tok-n">String</span> <span class="tok-n">saltedPassword</span> <span class="tok-o">=</span> <span class="tok-n">password</span> <span class="tok-o">+</span> <span class="tok-n">salt</span><span class="tok-o">;</span>
			<span class="tok-kt">byte</span><span class="tok-o">[]</span> <span class="tok-n">digest</span> <span class="tok-o">=</span> <span class="tok-n">md</span><span class="tok-o">.</span><span class="tok-na">digest</span><span class="tok-o">(</span><span class="tok-n">saltedPassword</span><span class="tok-o">.</span><span class="tok-na">getBytes</span><span class="tok-o">());</span>
			<span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-nf">String</span><span class="tok-o">(</span><span class="tok-n">digest</span><span class="tok-o">);</span>
		<span class="tok-o">};</span>

		<span class="tok-n">String</span> <span class="tok-n">salted</span> <span class="tok-o">=</span> <span class="tok-n">md5Encoder</span><span class="tok-o">.</span><span class="tok-na">encode</span><span class="tok-o">(</span><span class="tok-s">&quot;abc&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;123&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">salted</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You should get a compiler error on this line because <code>getIstance()</code> method throws <code>NoSuchAlgorithmException</code> and the functional interface does not declare the <code>encode</code> method to throw any exceptions.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Create PasswordEncoder4 like the code below</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_02</span><span class="tok-o">.</span><span class="tok-na">interfaces</span><span class="tok-o">;</span>

<span class="tok-nd">@FunctionalInterface</span>
<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">PasswordEncoder4</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-n">String</span> <span class="tok-nf">encode</span><span class="tok-o">(</span><span class="tok-n">String</span> <span class="tok-n">password</span><span class="tok-o">,</span> <span class="tok-n">String</span> <span class="tok-n">salt</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">Exception</span><span class="tok-o">;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>we just added a <code>throws Exception</code> to silence the compiler. In a non tutorial situation you will probably throw a runtime exception or define your own exception type or better yet use the new Java 8 <code>Optional</code> type which we will cover later.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Change the type of <code>md5Encoder</code> in FunctionalInterfaceExample3 to <code>PasswordEncoder4</code> to get rid of the compiler error.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">Exception</span> <span class="tok-o">{</span>

		<span class="tok-n">PasswordEncoder4</span> <span class="tok-n">md5Encoder</span> <span class="tok-o">=</span> <span class="tok-o">(</span><span class="tok-n">password</span><span class="tok-o">,</span> <span class="tok-n">salt</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>  <i class="conum" data-value="1"></i><b>(1)</b>
			<span class="tok-n">MessageDigest</span> <span class="tok-n">md</span> <span class="tok-o">=</span> <span class="tok-n">MessageDigest</span><span class="tok-o">.</span><span class="tok-na">getInstance</span><span class="tok-o">(</span><span class="tok-s">&quot;MD5&quot;</span><span class="tok-o">);</span>
			<span class="tok-n">String</span> <span class="tok-n">saltedPassword</span> <span class="tok-o">=</span> <span class="tok-n">password</span> <span class="tok-o">+</span> <span class="tok-n">salt</span><span class="tok-o">;</span>
			<span class="tok-kt">byte</span><span class="tok-o">[]</span> <span class="tok-n">digest</span> <span class="tok-o">=</span> <span class="tok-n">md</span><span class="tok-o">.</span><span class="tok-na">digest</span><span class="tok-o">(</span><span class="tok-n">saltedPassword</span><span class="tok-o">.</span><span class="tok-na">getBytes</span><span class="tok-o">());</span>
			<span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-nf">String</span><span class="tok-o">(</span><span class="tok-n">digest</span><span class="tok-o">);</span>
		<span class="tok-o">};</span>

		<span class="tok-n">String</span> <span class="tok-n">salted</span> <span class="tok-o">=</span> <span class="tok-n">md5Encoder</span><span class="tok-o">.</span><span class="tok-na">encode</span><span class="tok-o">(</span><span class="tok-s">&quot;abc&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;123&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">salted</span><span class="tok-o">);</span>
	<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>change is on this line from <code>PasswordEnocder1</code> to <code>PasswordEncoder4</code></td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="ulist">
<div class="title">A lambda expression must have</div>
<ul>
<li>
<p>parameters types to match the parameters types of the method in the functional interface.</p>
</li>
<li>
<p>return something with same type as the method in the functional interface</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The java 8 compiler translates a lambda expression to an instance of a functional interface using invokedynamic bytecode and <em>java.lang.invoke.LambdaMetafactory</em> which has felxiblity to generate the most efficient implementation of the lambda expression.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>At this point you should have good understanding of functional interfaces and how they interact with lambdas.</p>
</div>
</div>
<div class="sect2">
<h3 id="_capturing_values"><a class="anchor" href="#_capturing_values"></a>2.6. Capturing values</h3>
<div class="paragraph lead">
<p>Can lambdas interact with variables defined outside the body of the lambda that is the question that this section answers.</p>
</div>
<div class="listingblock">
<div class="title">Lambdas can access local values</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">capture</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaCaptureExample1</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-kt">int</span> <span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">10</span><span class="tok-o">;</span>
		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-n">var</span><span class="tok-o">));</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>notice that the lambda expression is reading the value of the var variable.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Values have to be final or effectively final</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">capture</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaCaptureExample2</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-kt">int</span> <span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-o">;</span>
		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>

			<span class="tok-n">var</span><span class="tok-o">++;</span> <i class="conum" data-value="1"></i><b>(1)</b>
			<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span>
		<span class="tok-o">});</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>will produce a compiler error <code>Error: Local variable var defined in an enclosing scope must be final or effectively final</code> Inside of the body of a lambda expression you can only access final variables. Because of the line <code>var++;</code> the compiler no longer considers var to be an effectively final variable therefore it can not be accessed from within the lambda expression.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Compiler infers finality automatically</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">capture</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaCaptureExample3</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-kt">int</span> <span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-o">;</span>
		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-n">var</span><span class="tok-o">));</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">50</span><span class="tok-o">;</span>  <i class="conum" data-value="2"></i><b>(2)</b>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>will produce a compiler error <code>Error: Local variable var defined in an enclosing scope must be final or effectively final</code> Inside of the body of a lambda expression you can read variable and references but you can&#8217;t modify them.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>because we did not declare var to be final this line does not generate a compile error but is the reason why the lambda expression generates a compile error.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Lambdas can access static member fields</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">capture</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaCaptureExample4</span> <span class="tok-o">{</span>

	<span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-kt">int</span> <span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-o">;</span> <i class="conum" data-value="1"></i><b>(1)</b>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-n">var</span><span class="tok-o">));</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>class level static variables that are effectively final can be seen by the body of a lambda expression</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Lambdas can class instance fields</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">capture</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaCaptureExample5</span> <span class="tok-o">{</span>

	<span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-o">;</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-kd">private</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

	<span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span> <span class="tok-o">{</span>
		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-n">var</span><span class="tok-o">));</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-o">}</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-k">new</span> <span class="tok-nf">LambdaCaptureExample5</span><span class="tok-o">().</span><span class="tok-na">doSomething</span><span class="tok-o">();</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>class level variables that are effectively final can be seen by the body of a lambda expression.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">this in lambda bodies</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">capture</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaCaptureExample6</span> <span class="tok-o">{</span>

	<span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-kd">final</span> <span class="tok-n">LambdaCaptureExample6</span> <span class="tok-n">INSTANCE</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">LambdaCaptureExample6</span><span class="tok-o">();</span>
	<span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-o">;</span>
	<span class="tok-kd">private</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

	<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span> <span class="tok-o">{</span>
		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
			<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">var</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>
			<span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-k">this</span> <span class="tok-o">==</span> <span class="tok-n">INSTANCE</span><span class="tok-o">)</span> <span class="tok-o">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
				<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span>
						<span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Within the lambda body this refers to the this of the enclosing object&quot;</span><span class="tok-o">);</span>
			<span class="tok-o">}</span>
		<span class="tok-o">});</span>
	<span class="tok-o">}</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">INSTANCE</span><span class="tok-o">.</span><span class="tok-na">doSomething</span><span class="tok-o">();</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>notice that we are using <code>this.var</code> to access the var variable</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Within the context of a lambda body <code>this</code> refers to the this pointer of the object that contains the lambda expression and not the this pointer of an object that might be generated by the java complier to represent the lambda expression in the JVM. <strong>This is one of the reasons why lambda expressions are not just a more compact from of anonymous inner class</strong></td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Inside the body of a lambda you can access any variables that are visible to the lambda body which are declared final or are effectively final.</p>
</div>
<div class="paragraph">
<p>When the compiler translates  a lambda expression into a function instance it captures the variables from the enclosing scope of the lambda as final parameters on the generated lambda function body. for example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kt">int</span> <span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-o">;</span>
<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>
<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-n">var</span><span class="tok-o">));</span>
</code></pre>
</div>
</div>
<div class="paragraph">
<p>logically translates to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">lambda1</span><span class="tok-o">(</span><span class="tok-kd">final</span> <span class="tok-kt">int</span> <span class="tok-n">var</span><span class="tok-o">,</span> <span class="tok-kd">final</span> <span class="tok-n">Integer</span> <span class="tok-n">x</span><span class="tok-o">)</span> <span class="tok-o">{</span>
<span class="tok-o">}</span>
</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Lamdas vs. Inner Classes</div>
<ul>
<li>
<p>Inner classes can have state in the form of class level instance variables lambdas can not</p>
</li>
<li>
<p>Inner classes can have multiple methods lambdas only have a single method body</p>
</li>
<li>
<p><code>this</code> points to the object instance for an anonymous Inner class but points to the enclosing object for a lambda</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Lambda vs. Inner Example</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">capture</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.function.Consumer</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaCaptureExample7</span> <span class="tok-o">{</span>

	<span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-kd">final</span> <span class="tok-n">LambdaCaptureExample7</span> <span class="tok-n">INSTANCE</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">LambdaCaptureExample7</span><span class="tok-o">();</span>
	<span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-kt">int</span> <span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-o">;</span>
	<span class="tok-kd">private</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

	<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span> <span class="tok-o">{</span>
		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
			<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">var</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>
			<span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-k">this</span> <span class="tok-o">==</span> <span class="tok-n">INSTANCE</span><span class="tok-o">)</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
				<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span>
						<span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Within the lambda body this refers to the this of the enclosing object&quot;</span><span class="tok-o">);</span>
			<span class="tok-o">}</span>
		<span class="tok-o">});</span>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span> <span class="tok-k">new</span> <span class="tok-n">Consumer</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;(){</span> <i class="conum" data-value="2"></i><b>(2)</b>

			<span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">state</span><span class="tok-o">=</span><span class="tok-mi">10</span><span class="tok-o">;</span> <i class="conum" data-value="3"></i><b>(3)</b>

			<span class="tok-nd">@Override</span>
			<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">accept</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">x</span><span class="tok-o">)</span> <span class="tok-o">{</span>
				<span class="tok-kt">int</span> <span class="tok-n">y</span> <span class="tok-o">=</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">state</span> <span class="tok-o">+</span> <span class="tok-n">LambdaCaptureExample7</span><span class="tok-o">.</span><span class="tok-na">this</span><span class="tok-o">.</span><span class="tok-na">var</span> <span class="tok-o">+</span> <span class="tok-n">x</span><span class="tok-o">;</span> <i class="conum" data-value="4"></i><b>(4)</b>
				<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Anonymous class &quot;</span> <span class="tok-o">+</span> <span class="tok-n">y</span><span class="tok-o">);</span>
			<span class="tok-o">}</span>

		<span class="tok-o">});</span>

	<span class="tok-o">}</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">INSTANCE</span><span class="tok-o">.</span><span class="tok-na">doSomething</span><span class="tok-o">();</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>In the lambda body <code>this</code> refers to this of the enclosing <code>LambdaCaptureExample7</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Notice that  we can just pass an anonymous inner class in the same place that we can pass a lambda expression because the <code>forEach</code> function is really looking far an instance of the <code>java.util.function.Consumer&lt;T&gt;</code> functional interface.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>In the anonymous inner class we can have private variables such <code>state</code> in the case of a lambda expression we can not define object level state variables.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>In the anonymous inner class <em>this</em> refers to the anonymous inner class instance. To get a this reference to the enclosing object we need to use <em>LambdaCaptureExample7.this.var</em></td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Lambda expressions are not the same as anonymous inner classes</strong></p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_coding_exercise_3"><a class="anchor" href="#_coding_exercise_3"></a>2.7. Coding Exercise #3</h3>
<div class="paragraph lead">
<p>Time to write some code to explore how lambdas capture the values in their surrounding scope.</p>
</div>
<div class="ulist">
<div class="title">Create a package</div>
<ul>
<li>
<p>Create a package <code>com.example.java8.lambda._03.capture</code> in your <code>Java8Tutorial</code> project.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Create and Run LambdaCaptureExample1</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">capture</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaCaptureExample1</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-kt">int</span> <span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">10</span><span class="tok-o">;</span>
		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-n">var</span><span class="tok-o">));</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create and Run LambdaCaptureExample2</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">capture</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaCaptureExample2</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-kt">int</span> <span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-o">;</span>
		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>

			<span class="tok-n">var</span><span class="tok-o">++;</span> <i class="conum" data-value="1"></i><b>(1)</b>
			<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span>
		<span class="tok-o">});</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create and Run LambdaCaptureExample3</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">capture</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaCaptureExample3</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-kt">int</span> <span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-o">;</span>
		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-n">var</span><span class="tok-o">));</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">50</span><span class="tok-o">;</span>  <i class="conum" data-value="2"></i><b>(2)</b>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create and Run LambdaCaptureExample4</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">capture</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaCaptureExample4</span> <span class="tok-o">{</span>

	<span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-kt">int</span> <span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-o">;</span> <i class="conum" data-value="1"></i><b>(1)</b>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-n">var</span><span class="tok-o">));</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create and Run LambdaCaptureExample5</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">capture</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaCaptureExample5</span> <span class="tok-o">{</span>

	<span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-o">;</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-kd">private</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

	<span class="tok-kd">private</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span> <span class="tok-o">{</span>
		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-n">var</span><span class="tok-o">));</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-o">}</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-k">new</span> <span class="tok-nf">LambdaCaptureExample5</span><span class="tok-o">().</span><span class="tok-na">doSomething</span><span class="tok-o">();</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create and Run LambdaCaptureExample6</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">capture</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaCaptureExample6</span> <span class="tok-o">{</span>

	<span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-kd">final</span> <span class="tok-n">LambdaCaptureExample6</span> <span class="tok-n">INSTANCE</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">LambdaCaptureExample6</span><span class="tok-o">();</span>
	<span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-o">;</span>
	<span class="tok-kd">private</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

	<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span> <span class="tok-o">{</span>
		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
			<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">var</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>
			<span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-k">this</span> <span class="tok-o">==</span> <span class="tok-n">INSTANCE</span><span class="tok-o">)</span> <span class="tok-o">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
				<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span>
						<span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Within the lambda body this refers to the this of the enclosing object&quot;</span><span class="tok-o">);</span>
			<span class="tok-o">}</span>
		<span class="tok-o">});</span>
	<span class="tok-o">}</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">INSTANCE</span><span class="tok-o">.</span><span class="tok-na">doSomething</span><span class="tok-o">();</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create and Run LambdaCaptureExample7</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">capture</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.function.Consumer</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaCaptureExample7</span> <span class="tok-o">{</span>

	<span class="tok-kd">private</span> <span class="tok-kd">static</span> <span class="tok-kd">final</span> <span class="tok-n">LambdaCaptureExample7</span> <span class="tok-n">INSTANCE</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">LambdaCaptureExample7</span><span class="tok-o">();</span>
	<span class="tok-kd">private</span> <span class="tok-kd">final</span> <span class="tok-kt">int</span> <span class="tok-n">var</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-o">;</span>
	<span class="tok-kd">private</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

	<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span> <span class="tok-o">{</span>
		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>
			<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">var</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>
			<span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-k">this</span> <span class="tok-o">==</span> <span class="tok-n">INSTANCE</span><span class="tok-o">)</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
				<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span>
						<span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Within the lambda body this refers to the this of the enclosing object&quot;</span><span class="tok-o">);</span>
			<span class="tok-o">}</span>
		<span class="tok-o">});</span>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span> <span class="tok-k">new</span> <span class="tok-n">Consumer</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;(){</span> <i class="conum" data-value="2"></i><b>(2)</b>

			<span class="tok-kd">private</span> <span class="tok-kt">int</span> <span class="tok-n">state</span><span class="tok-o">=</span><span class="tok-mi">10</span><span class="tok-o">;</span> <i class="conum" data-value="3"></i><b>(3)</b>

			<span class="tok-nd">@Override</span>
			<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">accept</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">x</span><span class="tok-o">)</span> <span class="tok-o">{</span>
				<span class="tok-kt">int</span> <span class="tok-n">y</span> <span class="tok-o">=</span> <span class="tok-k">this</span><span class="tok-o">.</span><span class="tok-na">state</span> <span class="tok-o">+</span> <span class="tok-n">LambdaCaptureExample7</span><span class="tok-o">.</span><span class="tok-na">this</span><span class="tok-o">.</span><span class="tok-na">var</span> <span class="tok-o">+</span> <span class="tok-n">x</span><span class="tok-o">;</span> <i class="conum" data-value="4"></i><b>(4)</b>
				<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Anonymous class &quot;</span> <span class="tok-o">+</span> <span class="tok-n">y</span><span class="tok-o">);</span>
			<span class="tok-o">}</span>

		<span class="tok-o">});</span>

	<span class="tok-o">}</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">INSTANCE</span><span class="tok-o">.</span><span class="tok-na">doSomething</span><span class="tok-o">();</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_method_references"><a class="anchor" href="#_method_references"></a>2.8. Method References</h3>
<div class="paragraph lead">
<p>Since a lambda expression defines an anonymous function is it possible to create a lambda from an existing named method so that that we can reuse pre-existing code.</p>
</div>
<div class="paragraph">
<p>Java 8 provides methods references to allow for the reuse of existing methods as lambda expressions. There are 4 variants of method references.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Static method references</p>
</li>
<li>
<p>Constructor method references</p>
</li>
<li>
<p>Instance method references to arbitrary objects</p>
</li>
<li>
<p>Instance method references to specific objects</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Static Method References</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_04</span><span class="tok-o">.</span><span class="tok-na">methodref</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.function.Consumer</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaMethodRefExample1</span> <span class="tok-o">{</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">i</span><span class="tok-o">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-o">{</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">i</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">Consumer</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span>  <span class="tok-n">consumer1</span> <span class="tok-o">=</span> <span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">doSomething</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span> <i class="conum" data-value="2"></i><b>(2)</b>
		<span class="tok-n">consumer1</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>

		<span class="tok-n">Consumer</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">consumer2</span> <span class="tok-o">=</span> <span class="tok-nl">LambdaMethodRefExample1:</span><span class="tok-o">:</span><span class="tok-n">doSomething</span><span class="tok-o">;</span> <i class="conum" data-value="3"></i><b>(3)</b>
		<span class="tok-n">consumer2</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>doSommething</code> method accepts a parameter and returns nothing, its signature matches that of the <code>java.util.function.Consumer&lt;T&gt;</code> functional interface.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We are using a very simple lambda that matches just calls <code>doSomething()</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We use  method reference to tell the java compiler that the method named <code>LambdaMethodRefExample1::doSomething</code> in the method reference should be used as the body of the lambda. So long as the referenced method has the same signature as the functional interface a lambda body / expression is generated based on the referenced method.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Method references are a convenient way to use existing methods as lambda expressions.</p>
</div>
<div class="listingblock">
<div class="title">Instance method references to specific object</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_04</span><span class="tok-o">.</span><span class="tok-na">methodref</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.function.Consumer</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaMethodRefExample2</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">Consumer</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span>  <span class="tok-n">consumer1</span> <span class="tok-o">=</span> <span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">consumer1</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>

		<span class="tok-n">Consumer</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">consumer2</span> <span class="tok-o">=</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">;</span> <i class="conum" data-value="2"></i><b>(2)</b>
		<span class="tok-n">consumer2</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a lambda expression that just calls System.out.println() with the passed in parameter.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>System.out::println</code> is a method reference that tells the compiler that the lambda body signature should match the method <code>System.out::println</code> and that the lambda expression should result in a call to <code>System.out.println1</code></td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Constructor method reference</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_04</span><span class="tok-o">.</span><span class="tok-na">methodref</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.function.Function</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaMethodRefExample3</span> <span class="tok-o">{</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">Function</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">mapper1</span> <span class="tok-o">=</span> <span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-k">new</span> <span class="tok-nf">Integer</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">mapper1</span><span class="tok-o">.</span><span class="tok-na">apply</span><span class="tok-o">(</span><span class="tok-s">&quot;11&quot;</span><span class="tok-o">));</span>

		<span class="tok-n">Function</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">mapper2</span> <span class="tok-o">=</span> <span class="tok-nl">Integer:</span><span class="tok-o">:</span><span class="tok-k">new</span><span class="tok-o">;</span>  <i class="conum" data-value="2"></i><b>(2)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">mapper2</span><span class="tok-o">.</span><span class="tok-na">apply</span><span class="tok-o">(</span><span class="tok-s">&quot;11&quot;</span><span class="tok-o">));</span>
	<span class="tok-o">}</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a lambda expression that calls the Integer passing in a String.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>Integer::new</code> is a method reference to a constructor. Since the Integer Constructor can take a String and return an instance of Integer. The constructor matches the definition of the <code>java.util.function.Function</code> interface.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Instance method references to arbitrary objects</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_04</span><span class="tok-o">.</span><span class="tok-na">methodref</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.function.Function</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaMethodRefExample4</span> <span class="tok-o">{</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">Function</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">mapper1</span> <span class="tok-o">=</span> <span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span><span class="tok-o">.</span><span class="tok-na">toUpperCase</span><span class="tok-o">();</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">mapper1</span><span class="tok-o">.</span><span class="tok-na">apply</span><span class="tok-o">(</span><span class="tok-s">&quot;abc&quot;</span><span class="tok-o">));</span>

		<span class="tok-n">Function</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">mapper2</span> <span class="tok-o">=</span> <span class="tok-nl">String:</span><span class="tok-o">:</span><span class="tok-n">toUpperCase</span><span class="tok-o">;</span> <i class="conum" data-value="2"></i><b>(2)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">mapper2</span><span class="tok-o">.</span><span class="tok-na">apply</span><span class="tok-o">(</span><span class="tok-s">&quot;def&quot;</span><span class="tok-o">));</span>
	<span class="tok-o">}</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The lambda expression invokes an instance method on the <code>x</code> parameter</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>'String::toUpperCase` method reference generates a lambda equivalent to <code>x -&gt; x.toUpperCase</code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_coding_exercise_4"><a class="anchor" href="#_coding_exercise_4"></a>2.9. Coding Exercise #4</h3>
<div class="listingblock">
<div class="title">Code and run LambdaMethodRefExample1</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_04</span><span class="tok-o">.</span><span class="tok-na">methodref</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.function.Consumer</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaMethodRefExample1</span> <span class="tok-o">{</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">(</span><span class="tok-n">Integer</span> <span class="tok-n">i</span><span class="tok-o">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-o">{</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">i</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">Consumer</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span>  <span class="tok-n">consumer1</span> <span class="tok-o">=</span> <span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">doSomething</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span> <i class="conum" data-value="2"></i><b>(2)</b>
		<span class="tok-n">consumer1</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>

		<span class="tok-n">Consumer</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">consumer2</span> <span class="tok-o">=</span> <span class="tok-nl">LambdaMethodRefExample1:</span><span class="tok-o">:</span><span class="tok-n">doSomething</span><span class="tok-o">;</span> <i class="conum" data-value="3"></i><b>(3)</b>
		<span class="tok-n">consumer2</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Code and run LambdaMethodRefExample2</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_04</span><span class="tok-o">.</span><span class="tok-na">methodref</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.function.Consumer</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaMethodRefExample2</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">Consumer</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span>  <span class="tok-n">consumer1</span> <span class="tok-o">=</span> <span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">consumer1</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>

		<span class="tok-n">Consumer</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">consumer2</span> <span class="tok-o">=</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">;</span> <i class="conum" data-value="2"></i><b>(2)</b>
		<span class="tok-n">consumer2</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Code and run LambdaMethodRefExample3</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_04</span><span class="tok-o">.</span><span class="tok-na">methodref</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.function.Function</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaMethodRefExample3</span> <span class="tok-o">{</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">Function</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">mapper1</span> <span class="tok-o">=</span> <span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-k">new</span> <span class="tok-nf">Integer</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">mapper1</span><span class="tok-o">.</span><span class="tok-na">apply</span><span class="tok-o">(</span><span class="tok-s">&quot;11&quot;</span><span class="tok-o">));</span>

		<span class="tok-n">Function</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">mapper2</span> <span class="tok-o">=</span> <span class="tok-nl">Integer:</span><span class="tok-o">:</span><span class="tok-k">new</span><span class="tok-o">;</span>  <i class="conum" data-value="2"></i><b>(2)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">mapper2</span><span class="tok-o">.</span><span class="tok-na">apply</span><span class="tok-o">(</span><span class="tok-s">&quot;11&quot;</span><span class="tok-o">));</span>
	<span class="tok-o">}</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Code and run LambdaMethodRefExample4</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_04</span><span class="tok-o">.</span><span class="tok-na">methodref</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.function.Function</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">LambdaMethodRefExample4</span> <span class="tok-o">{</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">Function</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">mapper1</span> <span class="tok-o">=</span> <span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span><span class="tok-o">.</span><span class="tok-na">toUpperCase</span><span class="tok-o">();</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">mapper1</span><span class="tok-o">.</span><span class="tok-na">apply</span><span class="tok-o">(</span><span class="tok-s">&quot;abc&quot;</span><span class="tok-o">));</span>

		<span class="tok-n">Function</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">,</span> <span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">mapper2</span> <span class="tok-o">=</span> <span class="tok-nl">String:</span><span class="tok-o">:</span><span class="tok-n">toUpperCase</span><span class="tok-o">;</span> <i class="conum" data-value="2"></i><b>(2)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">mapper2</span><span class="tok-o">.</span><span class="tok-na">apply</span><span class="tok-o">(</span><span class="tok-s">&quot;def&quot;</span><span class="tok-o">));</span>
	<span class="tok-o">}</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lambda_summary"><a class="anchor" href="#_lambda_summary"></a>2.10. Lambda Summary</h3>
<div class="ulist">
<ul>
<li>
<p>A lambda expression defines an anonymous function</p>
</li>
<li>
<p>A functional interface is an interface with a single method</p>
</li>
<li>
<p>In Java 8 the type of a lambda expression is the same as the functional interface that defines the signature of the lambda method</p>
</li>
<li>
<p>Java 8 Lambda syntax <code>(parameters) -&gt; expression</code> or &#8216;(parameters) &#8594; { statements; }&#8217;</p>
</li>
<li>
<p>Java 8 defines method references as way to reuse existing methods as lambda expressions</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_default_methods"><a class="anchor" href="#_default_methods"></a>3. Default Methods</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>A natural place to use lambda expressions is with the java collections framework. Using lambda expressions with collections framework means changing the framework which means breaking code that uses it. Therefore a feature was needed to allow the collections library to be changed without breaking backward compatibility. This feature is called default methods and it is the topic of this section.</p>
</div>
<div class="sect2">
<h3 id="_definition_2"><a class="anchor" href="#_definition_2"></a>3.1. Definition</h3>
<div class="paragraph">
<div class="title">The interface evolution problem</div>
<p>The collections frameworks is designed as a set of interfaces that defines the semantics of the collections and implementation classes that implement the interfaces. For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>List</code> interface is implemented by <code>ArrayList</code>, <code>LinkedList</code>, &#8230; etc.</p>
</li>
<li>
<p><code>Map</code> interface is implemented by <code>HashMap</code>, <code>HashTable</code>, &#8230;. etc.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are also numerous third party libraries that implement the collection interfaces such as &#8220;Apache Commons Collections&#8221;, &#8220;Google Guava&#8221; and many others.</p>
</div>
<div class="paragraph">
<p>With lambda expressions being available it makes sense to add a <code>forEach</code> method to every collection in the framework, which means adding a method <code>void forEach(Consumer&lt;? super T&gt; action)</code> to <code>java.lang.Iterable</code> since every collection implements <code>Iterable</code>. But by adding <code>forEach</code> to the base interface every class that implements the interface must also provide an implementation of <code>forEach</code> which means that existing third party libraries such as <code>Google Guava</code> would break.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Once an interface is published and lot of code depends on it changing the interface is very hard, unless you have default methods of Java 8.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<div class="title">The solution to the interface evolution problem</div>
<p>A default method on java interface has an implementation provided in the interface and is inherited by classes that implement the interface. Here is
an example from the <code>java.util</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Iterable</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-o">{</span>

    <span class="tok-n">Iterator</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-nf">iterator</span><span class="tok-o">();</span>

    <span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">forEach</span><span class="tok-o">(</span><span class="tok-n">Consumer</span><span class="tok-o">&lt;?</span> <span class="tok-kd">super</span> <span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-n">action</span><span class="tok-o">)</span> <span class="tok-o">{</span>  <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="tok-n">Objects</span><span class="tok-o">.</span><span class="tok-na">requireNonNull</span><span class="tok-o">(</span><span class="tok-n">action</span><span class="tok-o">);</span>
        <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">T</span> <span class="tok-n">t</span> <span class="tok-o">:</span> <span class="tok-k">this</span><span class="tok-o">)</span> <span class="tok-o">{</span>
            <span class="tok-n">action</span><span class="tok-o">.</span><span class="tok-na">accept</span><span class="tok-o">(</span><span class="tok-n">t</span><span class="tok-o">);</span>
        <span class="tok-o">}</span>
    <span class="tok-o">}</span>

    <span class="tok-k">default</span> <span class="tok-n">Spliterator</span><span class="tok-o">&lt;</span><span class="tok-n">T</span><span class="tok-o">&gt;</span> <span class="tok-nf">spliterator</span><span class="tok-o">()</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="tok-k">return</span> <span class="tok-n">Spliterators</span><span class="tok-o">.</span><span class="tok-na">spliteratorUnknownSize</span><span class="tok-o">(</span><span class="tok-n">iterator</span><span class="tok-o">(),</span> <span class="tok-mi">0</span><span class="tok-o">);</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>adding <code>default</code> to a method definition in an interface means that you can provide an implementation of the method in the interface.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You still can&#8217;t define fields on an interface so you can&#8217;t do something like.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Test</span> <span class="tok-o">{</span>
  <span class="tok-kt">int</span> <span class="tok-n">x</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-o">;</span> <i class="conum" data-value="1"></i><b>(1)</b>

  <span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span>
  <span class="tok-o">{</span>
	<span class="tok-n">x</span><span class="tok-o">++;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>produces a compiler error interfaces are not classes they can not contain state, they can only define behaviour by defining method signatures.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Default methods can only operate on the parameters you pass to the default method</strong></p>
</div>
<div class="paragraph">
<p><code>abstract</code> methods on classes are methods with no body, <code>default</code> methods on interfaces are methods with a body.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_default_method_semantics"><a class="anchor" href="#_default_method_semantics"></a>3.2. Default Method Semantics</h3>
<div class="paragraph lead">
<p>The following examples will demonstrate how default methods are used and how conflicts between default methods are avoided.</p>
</div>
<div class="listingblock">
<div class="title">Test interface with a default method</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Test</span> <span class="tok-o">{</span>
	<span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-o">{</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Test&quot;</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>default</code> keyword makes the <code>doSomething()</code> method a default method</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Test class inheriting the default method implementation</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">TestImpl1</span> <span class="tok-kd">implements</span> <span class="tok-n">Test</span> <span class="tok-o">{</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">TestImpl1</span> <span class="tok-n">testImpl</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">TestImpl1</span><span class="tok-o">();</span>
		<span class="tok-n">testImpl</span><span class="tok-o">.</span><span class="tok-na">doSomething</span><span class="tok-o">();</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Notice that the <code>TestImpl1</code> does not provide an implementation of the <code>doSomething</code> method but it can still be called because the implementation is provided by the Test interface.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Overriding a default method</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">TestImpl2</span> <span class="tok-kd">implements</span> <span class="tok-n">Test</span> <span class="tok-o">{</span>

	<span class="tok-nd">@Override</span>
	<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;TestImpl2&quot;</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">TestImpl2</span> <span class="tok-n">testImpl</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">TestImpl2</span><span class="tok-o">();</span>
		<span class="tok-n">testImpl</span><span class="tok-o">.</span><span class="tok-na">doSomething</span><span class="tok-o">();</span> <i class="conum" data-value="2"></i><b>(2)</b>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The class provides its own implementation of <code>doSomething</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The call to <code>doSomething</code> is done by the class</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">A hierarchy of default methods</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">TestA</span> <span class="tok-kd">extends</span> <span class="tok-n">Test</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>

	<span class="tok-nd">@Override</span>
	<span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span>  <i class="conum" data-value="2"></i><b>(2)</b>
	<span class="tok-o">{</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;TestA&quot;</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>TestA</code> extends interface <code>Test</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>TestA overrides the default method <code>doSomething()</code></td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Select the most specific default method implementation</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">TestImpl3</span> <span class="tok-kd">implements</span> <span class="tok-n">TestA</span> <span class="tok-o">{</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">TestImpl3</span> <span class="tok-n">testImpl</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">TestImpl3</span><span class="tok-o">();</span>
		<span class="tok-n">testImpl</span><span class="tok-o">.</span><span class="tok-na">doSomething</span><span class="tok-o">();</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The implementation of <code>doSomething</code> from <code>TestA</code> will be selected over the implementation from <code>Test</code> because it is more specific and the compiler always selects the most specific default method.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Interface A with default method doSomething</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">A</span> <span class="tok-o">{</span>
	<span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span>
	<span class="tok-o">{</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;A&quot;</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span>
</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Interface B with default method doSomething</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">B</span> <span class="tok-o">{</span>
	<span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span>
	<span class="tok-o">{</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;B&quot;</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span>
</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Implementation class with default method conflict</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ABImpl1</span> <span class="tok-kd">implements</span> <span class="tok-n">A</span><span class="tok-o">,</span> <span class="tok-n">B</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>

<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Because A and B interfaces define the same default method the compiler will generate an error. <code>Duplicate default methods named doSomething with the parameters () and () are inherited from  the types B and A</code></td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Resolving default method conflict</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ABImpl2</span> <span class="tok-kd">implements</span> <span class="tok-n">A</span><span class="tok-o">,</span> <span class="tok-n">B</span> <span class="tok-o">{</span>
	<span class="tok-nd">@Override</span>
	<span class="tok-kd">public</span>  <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;ABImpl2&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">A</span><span class="tok-o">.</span><span class="tok-na">super</span><span class="tok-o">.</span><span class="tok-na">doSomething</span><span class="tok-o">();</span> <i class="conum" data-value="2"></i><b>(2)</b>
	<span class="tok-o">}</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-k">new</span> <span class="tok-nf">ABImpl2</span><span class="tok-o">().</span><span class="tok-na">doSomething</span><span class="tok-o">();</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Class must implement its own version of the default method because of conflict between A&#8217;s default method and B&#8217;s default method.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>A.super.doSomething()</code> Show the class can select which default method it want&#8217;s to delegate to or it can implement its own version of <code>doSometing</code></td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Interface C extends A</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">C</span> <span class="tok-kd">extends</span> <span class="tok-n">A</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>

	<span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">other</span><span class="tok-o">()</span>
	<span class="tok-o">{</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;C&quot;</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>C extends A but does not override the <code>doSomething</code> method</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Interface D extends A</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">D</span> <span class="tok-kd">extends</span> <span class="tok-n">A</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>

	<span class="tok-nd">@Override</span>
	<span class="tok-kd">public</span> <span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span> <i class="conum" data-value="2"></i><b>(2)</b>
	<span class="tok-o">{</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;D&quot;</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>D extends A</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>D overrides the inherited default method <code>doSomething</code></td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Diamond Inheritance Example</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">CDImpl</span> <span class="tok-kd">implements</span> <span class="tok-n">C</span><span class="tok-o">,</span> <span class="tok-n">D</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-k">new</span> <span class="tok-nf">CDImpl</span><span class="tok-o">().</span><span class="tok-na">doSomething</span><span class="tok-o">();</span> <i class="conum" data-value="2"></i><b>(2)</b>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>CDImpl</code> implements both <code>C</code> and <code>D</code> so which implementation of <code>doSomething()</code> will it get, the implementation from <code>A</code> or the implementation from <code>D</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The implementation of <code>doSomething</code> from D will be selected because it is the most specific implementation. and If C hand also implement <em>doSomething</em> there would have been a conflict and <code>CDImpl</code> would have had to override <code>doSomening()</code></td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>if there is a conflict between default methods the class that is implementing the default methods must override the conflicting default method</p>
</li>
<li>
<p>In an inheritance hierarchy with default methods the most specific default method wins.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_coding_exercise_5"><a class="anchor" href="#_coding_exercise_5"></a>3.3. Coding Exercise #5</h3>
<div class="paragraph lead">
<p>Time to try out default methods for yourself. Create a package <code>com.example.java8.lambda._05.defaultmethods</code> to experiment with default methods in.</p>
</div>
<div class="listingblock">
<div class="title">Create Test Interface with a default method</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">Test</span> <span class="tok-o">{</span>
	<span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-o">{</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Test&quot;</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create and Run TestImp1</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">TestImpl1</span> <span class="tok-kd">implements</span> <span class="tok-n">Test</span> <span class="tok-o">{</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">TestImpl1</span> <span class="tok-n">testImpl</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">TestImpl1</span><span class="tok-o">();</span>
		<span class="tok-n">testImpl</span><span class="tok-o">.</span><span class="tok-na">doSomething</span><span class="tok-o">();</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create and Run TestImpl2</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">TestImpl2</span> <span class="tok-kd">implements</span> <span class="tok-n">Test</span> <span class="tok-o">{</span>

	<span class="tok-nd">@Override</span>
	<span class="tok-kd">public</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;TestImpl2&quot;</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">TestImpl2</span> <span class="tok-n">testImpl</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">TestImpl2</span><span class="tok-o">();</span>
		<span class="tok-n">testImpl</span><span class="tok-o">.</span><span class="tok-na">doSomething</span><span class="tok-o">();</span> <i class="conum" data-value="2"></i><b>(2)</b>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create interface TestA</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">TestA</span> <span class="tok-kd">extends</span> <span class="tok-n">Test</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>

	<span class="tok-nd">@Override</span>
	<span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span>  <i class="conum" data-value="2"></i><b>(2)</b>
	<span class="tok-o">{</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;TestA&quot;</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create and Run TestImpl3</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">TestImpl3</span> <span class="tok-kd">implements</span> <span class="tok-n">TestA</span> <span class="tok-o">{</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">TestImpl3</span> <span class="tok-n">testImpl</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-nf">TestImpl3</span><span class="tok-o">();</span>
		<span class="tok-n">testImpl</span><span class="tok-o">.</span><span class="tok-na">doSomething</span><span class="tok-o">();</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create Interface A</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">A</span> <span class="tok-o">{</span>
	<span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span>
	<span class="tok-o">{</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;A&quot;</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span>
</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create Interface B</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">B</span> <span class="tok-o">{</span>
	<span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span>
	<span class="tok-o">{</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;B&quot;</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span>
</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create and Run ABImpl12</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">ABImpl2</span> <span class="tok-kd">implements</span> <span class="tok-n">A</span><span class="tok-o">,</span> <span class="tok-n">B</span> <span class="tok-o">{</span>
	<span class="tok-nd">@Override</span>
	<span class="tok-kd">public</span>  <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;ABImpl2&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">A</span><span class="tok-o">.</span><span class="tok-na">super</span><span class="tok-o">.</span><span class="tok-na">doSomething</span><span class="tok-o">();</span> <i class="conum" data-value="2"></i><b>(2)</b>
	<span class="tok-o">}</span>

	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-k">new</span> <span class="tok-nf">ABImpl2</span><span class="tok-o">().</span><span class="tok-na">doSomething</span><span class="tok-o">();</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Class must implement its own version of the default method because of conflict between A&#8217;s default method and B&#8217;s default method.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>A.super.doSomething()</code> Show the class can select which default method it want&#8217;s to delegate to or it can implement its own version of <code>doSometing</code></td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Create Interface C</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">C</span> <span class="tok-kd">extends</span> <span class="tok-n">A</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>

	<span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">other</span><span class="tok-o">()</span>
	<span class="tok-o">{</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;C&quot;</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>C extends A but does not override the <code>doSomething</code> method</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Create interface D</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">interface</span> <span class="tok-nc">D</span> <span class="tok-kd">extends</span> <span class="tok-n">A</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>

	<span class="tok-nd">@Override</span>
	<span class="tok-kd">public</span> <span class="tok-k">default</span> <span class="tok-kt">void</span> <span class="tok-nf">doSomething</span><span class="tok-o">()</span> <i class="conum" data-value="2"></i><b>(2)</b>
	<span class="tok-o">{</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;D&quot;</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>D extends A</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>D overrides the inherited default method <code>doSomething</code></td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Create and Run CDImpl.java</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">lambda</span><span class="tok-o">.</span><span class="tok-na">_05</span><span class="tok-o">.</span><span class="tok-na">defaultmethods</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">CDImpl</span> <span class="tok-kd">implements</span> <span class="tok-n">C</span><span class="tok-o">,</span> <span class="tok-n">D</span> <span class="tok-o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-k">new</span> <span class="tok-nf">CDImpl</span><span class="tok-o">().</span><span class="tok-na">doSomething</span><span class="tok-o">();</span> <i class="conum" data-value="2"></i><b>(2)</b>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Congratulations at this point you should be pretty comfortable with following new features and concepts in Java 8.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lambda expressions</p>
</li>
<li>
<p>Method references</p>
</li>
<li>
<p>Functional interfaces</p>
</li>
<li>
<p>Default methods</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_collections_enhancements"><a class="anchor" href="#_collections_enhancements"></a>4. Collections Enhancements</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>Every programming language constructs has its own set of design patterns that really show case the power of the language feature. For lambda expression working with collections is an area where lambda expressions are superior to anything from object oriented programming. The patterns you are about to learn in this section are an example of the functional programming paradigm.</p>
</div>
<div class="paragraph">
<p>We have already seen the <code>forEach</code> method which can be used with any Java collection. forEach is is important because it an example of a pattern called external iteration.</p>
</div>
<div class="ulist">
<div class="title">External Iteration</div>
<ul>
<li>
<p>External iteration is something you already familiar with, it&#8217;s is done by writing code using <code>for</code> and  <code>while</code> loops. The body the loops contains the processing logic and the definition of the loop controls how open the loop runs &#8230; etc.</p>
</li>
<li>
<p>External iteration is serial it is not easy to take the work done inside of a loop and run it on multiple cores without writing a lot of boiler plate code.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Internal Iteration</div>
<ul>
<li>
<p>Internal iteration delegates the looping to a library function such as <code>forEach</code> and the loop body processing to a lambda expression.</p>
</li>
<li>
<p>Internal iteration allows the library function we are delegating to implement the complex logic needed to execute the loop on multiple cores.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_default_methods_on_base_interfaces"><a class="anchor" href="#_default_methods_on_base_interfaces"></a>4.1. Default Methods on Base Interfaces</h3>
<div class="paragraph">
<p>The default method feature allowed the Java Team to add new features to the base interfaces that from the foundations of the collections framework. We will examine these new methods on the following bases interfaces.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>java.lang.Iterable</code></p>
</li>
<li>
<p><code>java.util.Collection</code></p>
</li>
<li>
<p><code>java.util.Map</code></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">New <code>java.lang.Iterable</code> methods in Java 8</div>
<ul>
<li>
<p><code>default void forEach(Consumer&lt;? super T&gt; action)</code></p>
</li>
<li>
<p><code>default Spliterator&lt;T&gt; spliterator()</code></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">New <code>java.util.Collection</code> Methods in Java 8</div>
<ul>
<li>
<p><code>default boolean removeIf(Predicate&lt;? super E&gt; filter)</code></p>
</li>
<li>
<p><code>default Spliterator&lt;E&gt; spliterator()</code></p>
</li>
<li>
<p><code>default Stream&lt;E&gt; stream()</code></p>
</li>
<li>
<p><code>default Stream&lt;E&gt; parallelStream()</code></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">New <code>java.util.Map</code> Methods in Java 8</div>
<ul>
<li>
<p><code>default V getOrDefault(Object key, V defaultValue)</code></p>
</li>
<li>
<p><code>default V putIfAbsent(K key, V value)</code></p>
</li>
<li>
<p><code>default boolean remove(Object key, Object value)</code></p>
</li>
<li>
<p><code>default V replace(K key, V value)</code></p>
</li>
<li>
<p><code>default boolean replace(K key, V oldValue, V newValue)</code></p>
</li>
<li>
<p><code>default void forEach(BiConsumer&lt;? super K, ? super V&gt; action)</code></p>
</li>
<li>
<p><code>default void replaceAll(BiFunction&lt;? super K, ? super V, ? extends V&gt; function)</code></p>
</li>
<li>
<p><code>default V computeIfAbsent(K key, Function&lt;? super K, ? extends V&gt; mappingFunction)</code></p>
</li>
<li>
<p><code>default V computeIfPresent(K key, BiFunction&lt;? super K, ? super V, ? extends V&gt; remappingFunction)</code></p>
</li>
<li>
<p><code>default V compute(K key, BiFunction&lt;? super K, ? super V, ? extends V&gt; remappingFunction)</code></p>
</li>
<li>
<p><code>default V merge(K key, V value,
BiFunction&lt;? super V, ? super V, ? extends V&gt; remappingFunction)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As you can see many of the newly added methods use functional interfaces as parameters such as <code>removeIf(Predicate&lt;? super E&gt; filter)</code> but some such as <code>default V putIfAbsent(K key, V value)</code> don&#8217;t use lambdas.</p>
</div>
<div class="paragraph">
<p>The following new methods deal with streams they will not be covered in this section. They are the topic of the next section.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>default Spliterator&lt;T&gt; spliterator()</code></p>
</li>
<li>
<p><code>default Stream&lt;E&gt; stream()</code></p>
</li>
<li>
<p><code>default Stream&lt;E&gt; parallelStream()</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_coding_exercise_6"><a class="anchor" href="#_coding_exercise_6"></a>4.2. Coding Exercise #6</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_streams"><a class="anchor" href="#_streams"></a>5. Streams</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>When examining java programs we always run into code along the following lines.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Run a database query get a list of Object</p>
</li>
<li>
<p>Iterate over the list and computer single result</p>
</li>
<li>
<p>Iterate over the list and generate a new data structure another list, or map, or set or &#8230; etc.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is a typical example of such code from Brian Goetz Java One 2013 Presentation on Lambda Expression.</p>
</div>
<div class="listingblock">
<div class="title">Typical Java 7 code to get a list of sellers over 65 sorted by name</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Txn</span><span class="tok-o">&gt;</span> <span class="tok-n">txns</span> <span class="tok-o">=</span> <span class="tok-n">getTransactions</span><span class="tok-o">();</span>

<span class="tok-n">Set</span><span class="tok-o">&lt;</span><span class="tok-n">Seller</span><span class="tok-o">&gt;</span> <span class="tok-n">sellers</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">HashSet</span><span class="tok-o">&lt;&gt;();</span>
 <span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">Txn</span> <span class="tok-n">t</span> <span class="tok-o">:</span> <span class="tok-n">txns</span><span class="tok-o">)</span> <span class="tok-o">{</span>
  <span class="tok-k">if</span> <span class="tok-o">(</span><span class="tok-n">t</span><span class="tok-o">.</span><span class="tok-na">getBuyer</span><span class="tok-o">().</span><span class="tok-na">getAge</span><span class="tok-o">()</span> <span class="tok-o">&gt;=</span> <span class="tok-mi">65</span><span class="tok-o">)</span>
    <span class="tok-n">sellers</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">t</span><span class="tok-o">.</span><span class="tok-na">getSeller</span><span class="tok-o">());</span>
<span class="tok-o">}</span>

<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Seller</span><span class="tok-o">&gt;</span> <span class="tok-n">sorted</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;&gt;(</span><span class="tok-n">sellers</span><span class="tok-o">);</span>
<span class="tok-n">Collections</span><span class="tok-o">.</span><span class="tok-na">sort</span><span class="tok-o">(</span><span class="tok-n">sorted</span><span class="tok-o">,</span> <span class="tok-k">new</span> <span class="tok-n">Comparator</span><span class="tok-o">&lt;</span><span class="tok-n">Group</span><span class="tok-o">&gt;()</span> <span class="tok-o">{</span>
    <span class="tok-kd">public</span> <span class="tok-kt">int</span> <span class="tok-nf">compare</span><span class="tok-o">(</span><span class="tok-n">Seller</span> <span class="tok-n">a</span><span class="tok-o">,</span> <span class="tok-n">Seller</span> <span class="tok-n">b</span><span class="tok-o">)</span> <span class="tok-o">{</span>
      <span class="tok-k">return</span> <span class="tok-n">a</span><span class="tok-o">.</span><span class="tok-na">getName</span><span class="tok-o">().</span><span class="tok-na">compareTo</span><span class="tok-o">(</span><span class="tok-n">b</span><span class="tok-o">.</span><span class="tok-na">getName</span><span class="tok-o">());</span>
   <span class="tok-o">}</span>
<span class="tok-o">});</span>

<span class="tok-k">for</span> <span class="tok-o">(</span><span class="tok-n">Seller</span> <span class="tok-n">s</span> <span class="tok-o">:</span> <span class="tok-n">sorted</span><span class="tok-o">)</span>
   <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">s</span><span class="tok-o">.</span><span class="tok-na">getName</span><span class="tok-o">());</span>
</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Java 8 version of the code using streams</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-n">txns</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">()</span>
    <span class="tok-o">.</span><span class="tok-na">filter</span><span class="tok-o">(</span><span class="tok-n">txn</span> <span class="tok-o">-&gt;</span> <span class="tok-n">txn</span><span class="tok-o">.</span><span class="tok-na">getBuyer</span><span class="tok-o">().</span><span class="tok-na">getAge</span><span class="tok-o">()</span> <span class="tok-o">&gt;=</span> <span class="tok-mi">65</span><span class="tok-o">)</span>
    <span class="tok-o">.</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">txn</span> <span class="tok-o">-&gt;</span> <span class="tok-n">txn</span><span class="tok-o">.</span><span class="tok-na">getSeller</span><span class="tok-o">())</span>
    <span class="tok-o">.</span><span class="tok-na">distinct</span><span class="tok-o">()</span>
    <span class="tok-o">.</span><span class="tok-na">sort</span><span class="tok-o">(</span><span class="tok-n">comparing</span><span class="tok-o">(</span><span class="tok-n">seller</span> <span class="tok-o">-&gt;</span> <span class="tok-n">seller</span><span class="tok-o">.</span><span class="tok-na">getName</span><span class="tok-o">()))</span>
    <span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">seller</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">seller</span><span class="tok-o">.</span><span class="tok-na">getName</span><span class="tok-o">());</span>
</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>*The streams API was added to java 8 to provide a functional lambda based api for processing collections. *</p>
</div>
<div class="paragraph">
<p>Streams offer a much more compact and cleaner api for processing collections based on functional programming design patterns. Learning how to use the streams API is going to require getting familiar with several functional programming patterns.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_streams_overview"><a class="anchor" href="#_streams_overview"></a>5.1. Streams Overview</h3>
<div class="paragraph">
<p>According to the javadoc a stream is <strong>&#8220;A sequence of elements supporting sequential and parallel aggregate operations.&#8221;</strong></p>
</div>
<div class="listingblock">
<div class="title">Stream example from the javadocs</div>
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Widget</span><span class="tok-o">&gt;</span> <span class="tok-n">widgets</span> <span class="tok-o">=</span> <span class="tok-n">getWidgets</span><span class="tok-o">();</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-kt">int</span> <span class="tok-n">sum</span> <span class="tok-o">=</span> <span class="tok-n">widgets</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">()</span>  <i class="conum" data-value="2"></i><b>(2)</b>
                 <span class="tok-o">.</span><span class="tok-na">filter</span><span class="tok-o">(</span><span class="tok-n">w</span> <span class="tok-o">-&gt;</span> <span class="tok-n">w</span><span class="tok-o">.</span><span class="tok-na">getColor</span><span class="tok-o">()</span> <span class="tok-o">==</span> <span class="tok-n">RED</span><span class="tok-o">)</span>  <i class="conum" data-value="3"></i><b>(3)</b>
                 <span class="tok-o">.</span><span class="tok-na">mapToInt</span><span class="tok-o">(</span><span class="tok-n">w</span> <span class="tok-o">-&gt;</span> <span class="tok-n">w</span><span class="tok-o">.</span><span class="tok-na">getWeight</span><span class="tok-o">())</span>  <i class="conum" data-value="4"></i><b>(4)</b>
                 <span class="tok-o">.</span><span class="tok-na">sum</span><span class="tok-o">();</span>  <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A a plain old java collection</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create a stream instance from a <strong>source</strong> java collection</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Add a filter operation to the stream <strong>intermediate operations pipeline</strong></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Add a map operation to to the stream <strong>intermediate operations pipeline</strong></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Add a <strong>terminal operation</strong> that kicks off the stream processing</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">A Stream</div>
<ul>
<li>
<p>Has a <strong>source</strong> that the stream can pull objects from</p>
</li>
<li>
<p>Has a <strong>pipeline</strong> of operations that will execute on the elements of the stream</p>
</li>
<li>
<p>Has a <strong>terminal</strong> operation that pulls values down the stream</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Stream lifecycle</div>
<ul>
<li>
<p><strong>Creation</strong> Streams get created from a source object such as a collection, file, or generator</p>
</li>
<li>
<p><strong>Configuration</strong> Streams get configured with a collection of pipeline operations.</p>
</li>
<li>
<p><strong>Execution</strong> Stream terminal operation is invoked which starts pulling objects trough the operations pipeline of the stream.</p>
</li>
<li>
<p><strong>Cleanup</strong> Stream can only be used once and have a <code>close()</code> method which needs to be called if the stream is backed by a IO source such as <code>Files.lines()</code> which reads a text and returns it as a stream of lines</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Streams Prime Directive</div>
<ul>
<li>
<p>Streams can process elements sequentially</p>
</li>
<li>
<p>Streams can process elements in parallel</p>
</li>
<li>
<p>Therefore stream operations are <strong>not allowed</strong> to modify the stream source</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Intermediate Streams Operations</div>
<ul>
<li>
<p><strong>Stateless intermediate operations</strong>&#8201;&#8212;&#8201;do not need to know the history of results from the previous steps in the pipeline or keep track of how many results it has produced or seen</p>
<div class="ulist">
<ul>
<li>
<p>filter</p>
</li>
<li>
<p>map</p>
</li>
<li>
<p>flatMap</p>
</li>
<li>
<p>peek</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Stateful Intermediate Operations</strong>&#8201;&#8212;&#8201;need to know the history of results produced by previous steps in the pipeline or needs to keep track of how many results it has produced or seen</p>
<div class="ulist">
<ul>
<li>
<p>distinct</p>
</li>
<li>
<p>limit</p>
</li>
<li>
<p>skip</p>
</li>
<li>
<p>sorted</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Terminal Stream Operations</div>
<ul>
<li>
<p><strong>Reduction Terminal Operations</strong>&#8201;&#8212;&#8201;return a single result</p>
<div class="ulist">
<ul>
<li>
<p>reduce</p>
</li>
<li>
<p>min</p>
</li>
<li>
<p>max</p>
</li>
<li>
<p>count</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Mutable Reduction Terminal Operations</strong>&#8201;&#8212;&#8201;return multiple results in a container data structure</p>
<div class="ulist">
<ul>
<li>
<p>collect</p>
</li>
<li>
<p>toArray</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Search Terminal Operations</strong>&#8201;&#8212;&#8201;return a result as soon as a match is found</p>
<div class="ulist">
<ul>
<li>
<p>anyMatch</p>
</li>
<li>
<p>allMatch</p>
</li>
<li>
<p>findAny</p>
</li>
<li>
<p>findFirst</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Generic Terminal Operation</strong> &#8201;&#8212;&#8201;do any kind of processing you want</p>
<div class="ulist">
<ul>
<li>
<p>forEach</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Read the javadoc for java.util.stream.Stream</strong></p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_coding_exercise_stream_source"><a class="anchor" href="#_coding_exercise_stream_source"></a>5.2. Coding Exercise Stream Source</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_01</span><span class="tok-o">.</span><span class="tok-na">source</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.stream.IntStream</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.stream.LongStream</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamSourceExample1</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Integer Stream Source&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">IntStream</span><span class="tok-o">.</span><span class="tok-na">rangeClosed</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">)</span>             <i class="conum" data-value="1"></i><b>(1)</b>
				 <span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span> <i class="conum" data-value="2"></i><b>(2)</b>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Long Stream Source&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">LongStream</span><span class="tok-o">.</span><span class="tok-na">range</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">)</span>                    <i class="conum" data-value="3"></i><b>(3)</b>
				  <span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span>

	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_01</span><span class="tok-o">.</span><span class="tok-na">source</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamSourceExample2</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">cities</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-s">&quot;toronto&quot;</span><span class="tok-o">,</span><span class="tok-s">&quot;ottawa&quot;</span><span class="tok-o">,</span><span class="tok-s">&quot;montreal&quot;</span><span class="tok-o">,</span><span class="tok-s">&quot;vancouver&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">cities</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>

	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_01</span><span class="tok-o">.</span><span class="tok-na">source</span><span class="tok-o">;</span>


<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamSourceExample3</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-kt">long</span> <span class="tok-n">length</span> <span class="tok-o">=</span> <span class="tok-s">&quot;ABCDEF&quot;</span><span class="tok-o">.</span><span class="tok-na">chars</span><span class="tok-o">().</span><span class="tok-na">count</span><span class="tok-o">();</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">length</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_01</span><span class="tok-o">.</span><span class="tok-na">source</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.io.IOException</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.FileSystems</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Files</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.nio.file.Path</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.ArrayList</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamSourceExample4</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">IOException</span> <span class="tok-o">{</span>

		<span class="tok-n">String</span> <span class="tok-n">workingDir</span> <span class="tok-o">=</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">getProperty</span><span class="tok-o">(</span><span class="tok-s">&quot;user.dir&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">Path</span> <span class="tok-n">workingDirPath</span> <span class="tok-o">=</span> <span class="tok-n">FileSystems</span><span class="tok-o">.</span><span class="tok-na">getDefault</span><span class="tok-o">().</span><span class="tok-na">getPath</span><span class="tok-o">(</span><span class="tok-n">workingDir</span><span class="tok-o">);</span>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">err</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Directory Listing Stream\n&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">list</span><span class="tok-o">(</span><span class="tok-n">workingDirPath</span><span class="tok-o">).</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">err</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;\nDepth First Directory Walking Stream\n&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">walk</span><span class="tok-o">(</span><span class="tok-n">workingDirPath</span><span class="tok-o">).</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span> <i class="conum" data-value="2"></i><b>(2)</b>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">err</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;\nFile finding stream\n&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">String</span> <span class="tok-n">classFileName</span> <span class="tok-o">=</span> <span class="tok-n">StreamSourceExample4</span><span class="tok-o">.</span><span class="tok-na">class</span><span class="tok-o">.</span><span class="tok-na">getName</span><span class="tok-o">().</span><span class="tok-na">replace</span><span class="tok-o">(</span><span class="tok-sc">&#39;.&#39;</span><span class="tok-o">,</span> <span class="tok-sc">&#39;/&#39;</span><span class="tok-o">)</span> <span class="tok-o">+</span> <span class="tok-s">&quot;.java&quot;</span><span class="tok-o">;</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Path</span><span class="tok-o">&gt;</span> <span class="tok-n">matchedPaths</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">ArrayList</span><span class="tok-o">&lt;&gt;();</span> <i class="conum" data-value="3"></i><b>(3)</b>
		<span class="tok-c1">// A stream that finds a file</span>
		<span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">find</span><span class="tok-o">(</span><span class="tok-n">workingDirPath</span><span class="tok-o">,</span> <span class="tok-mi">10</span><span class="tok-o">,</span>
				<span class="tok-o">(</span><span class="tok-n">filename</span><span class="tok-o">,</span> <span class="tok-n">attributes</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-n">filename</span><span class="tok-o">.</span><span class="tok-na">endsWith</span><span class="tok-o">(</span><span class="tok-n">classFileName</span><span class="tok-o">))</span>
				<span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span> <span class="tok-n">path</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>   <i class="conum" data-value="4"></i><b>(4)</b>
					<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">);</span>
					<span class="tok-n">matchedPaths</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">path</span><span class="tok-o">);</span>  <i class="conum" data-value="5"></i><b>(5)</b>
				<span class="tok-o">});</span>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">err</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;\nText lines stream\n&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">Files</span><span class="tok-o">.</span><span class="tok-na">lines</span><span class="tok-o">(</span><span class="tok-n">matchedPaths</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">(</span><span class="tok-mi">0</span><span class="tok-o">)).</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_coding_exercise_stream_terminal"><a class="anchor" href="#_coding_exercise_stream_terminal"></a>5.3. Coding Exercise Stream Terminal</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_02</span><span class="tok-o">.</span><span class="tok-na">terminal</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamTerminalExample1</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">Long</span> <span class="tok-n">count</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">count</span><span class="tok-o">();</span> <i class="conum" data-value="1"></i><b>(1)</b>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">count</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_02</span><span class="tok-o">.</span><span class="tok-na">terminal</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.Optional</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamTerminalExample2</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span><span class="tok-o">;</span>  <i class="conum" data-value="1"></i><b>(1)</b>

		<span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">min</span><span class="tok-o">(</span> <i class="conum" data-value="2"></i><b>(2)</b>
				<span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">,</span> <span class="tok-n">y</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">-</span> <span class="tok-n">y</span>  <i class="conum" data-value="3"></i><b>(3)</b>
				<span class="tok-o">);</span>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">result</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">());</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_02</span><span class="tok-o">.</span><span class="tok-na">terminal</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.Optional</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamTerminalExample3</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span><span class="tok-o">;</span>  <i class="conum" data-value="1"></i><b>(1)</b>

		<span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">max</span><span class="tok-o">(</span> <i class="conum" data-value="2"></i><b>(2)</b>
				<span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">,</span> <span class="tok-n">y</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">-</span> <span class="tok-n">y</span>  <i class="conum" data-value="3"></i><b>(3)</b>
				<span class="tok-o">);</span>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">result</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">());</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_02</span><span class="tok-o">.</span><span class="tok-na">terminal</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamTerminalExample4</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">Integer</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">reduce</span><span class="tok-o">(</span> <i class="conum" data-value="1"></i><b>(1)</b>
				<span class="tok-mi">0</span><span class="tok-o">,</span>  <i class="conum" data-value="2"></i><b>(2)</b>
				<span class="tok-o">(</span><span class="tok-n">oldResult</span><span class="tok-o">,</span><span class="tok-n">nextValue</span><span class="tok-o">)</span> <span class="tok-o">-&gt;</span> <span class="tok-n">oldResult</span><span class="tok-o">+</span><span class="tok-n">nextValue</span><span class="tok-o">*</span><span class="tok-n">nextValue</span><span class="tok-o">);</span> <i class="conum" data-value="3"></i><b>(3)</b>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">result</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_02</span><span class="tok-o">.</span><span class="tok-na">terminal</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.HashSet</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.Set</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.stream.Collectors</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamTerminalExample5</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;\nCollect stream results to a set&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">Set</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">set</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toSet</span><span class="tok-o">());</span>  <i class="conum" data-value="2"></i><b>(2)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">set</span><span class="tok-o">);</span>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;\nCollect stream results to a set&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">Set</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">results</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">HashSet</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;();</span>
		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">-&gt;</span><span class="tok-n">results</span><span class="tok-o">.</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-n">x</span><span class="tok-o">));</span>  <i class="conum" data-value="2"></i><b>(2)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">set</span><span class="tok-o">);</span>

	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_02</span><span class="tok-o">.</span><span class="tok-na">terminal</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamTerminalExample6</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">Object</span><span class="tok-o">[]</span> <span class="tok-n">objectArray</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">toArray</span><span class="tok-o">();</span>   <i class="conum" data-value="2"></i><b>(2)</b>
		<span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-n">objectArray</span><span class="tok-o">).</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">();</span>

		<span class="tok-n">Integer</span><span class="tok-o">[]</span> <span class="tok-n">integerArray</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">toArray</span><span class="tok-o">(</span><span class="tok-n">Integer</span><span class="tok-o">[]::</span><span class="tok-k">new</span><span class="tok-o">);</span> <i class="conum" data-value="3"></i><b>(3)</b>
		<span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-n">integerArray</span><span class="tok-o">).</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span>

	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_02</span><span class="tok-o">.</span><span class="tok-na">terminal</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.Optional</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamTerminalExample7</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">findAny</span><span class="tok-o">();</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">result</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">());</span>

	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_02</span><span class="tok-o">.</span><span class="tok-na">terminal</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.Optional</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamTerminalExample8</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">Optional</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">findFirst</span><span class="tok-o">();</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">result</span><span class="tok-o">.</span><span class="tok-na">get</span><span class="tok-o">());</span>

	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_02</span><span class="tok-o">.</span><span class="tok-na">terminal</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamTerminalExample9</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		 <span class="tok-kt">boolean</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">anyMatch</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">==</span> <span class="tok-mi">5</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">result</span><span class="tok-o">);</span>

	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_02</span><span class="tok-o">.</span><span class="tok-na">terminal</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamTerminalExample10</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		 <span class="tok-kt">boolean</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">allMatch</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">==</span> <span class="tok-mi">5</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>
		 <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">result</span><span class="tok-o">);</span>

		 <span class="tok-kt">boolean</span> <span class="tok-n">result2</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">allMatch</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">&lt;</span> <span class="tok-mi">6</span><span class="tok-o">);</span> <i class="conum" data-value="2"></i><b>(2)</b>
		 <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">result2</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_collectors_coding_example"><a class="anchor" href="#_collectors_coding_example"></a>5.4. Collectors Coding Example</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">collectors</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.stream.Collectors</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamCollectorsExample1</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">list</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">list</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">collectors</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.Set</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.stream.Collectors</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamCollectorsExample2</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">Set</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">set</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toSet</span><span class="tok-o">());</span>  <i class="conum" data-value="3"></i><b>(3)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">set</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">collectors</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.Map</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.UUID</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.stream.Collectors</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamCollectorsExample3</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">Map</span><span class="tok-o">&lt;</span><span class="tok-n">UUID</span><span class="tok-o">,</span> <span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">map</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toMap</span><span class="tok-o">(</span>
				<span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">UUID</span><span class="tok-o">.</span><span class="tok-na">randomUUID</span><span class="tok-o">()</span> <span class="tok-o">,</span>  <i class="conum" data-value="1"></i><b>(1)</b>
				<span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span><span class="tok-o">));</span> <i class="conum" data-value="2"></i><b>(2)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">map</span><span class="tok-o">);</span>


	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">collectors</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.stream.Collectors</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamCollectorsExample4</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">Integer</span> <span class="tok-n">sum</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">summingInt</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span><span class="tok-o">));</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">sum</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">collectors</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.IntSummaryStatistics</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.stream.Collectors</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamCollectorsExample5</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">IntSummaryStatistics</span> <span class="tok-n">statistics</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">collect</span><span class="tok-o">(</span>
				<span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">summarizingInt</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span><span class="tok-o">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
				<span class="tok-o">);</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">statistics</span><span class="tok-o">);</span>

	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">collectors</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.stream.Collectors</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamCollectorsExample6</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>

		<span class="tok-n">Double</span> <span class="tok-n">average</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">averagingInt</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span><span class="tok-o">));</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">average</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">collectors</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.stream.Collectors</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamCollectorsExample7</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">letters</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-s">&quot;A&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;B&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;C&quot;</span><span class="tok-o">);</span> <i class="conum" data-value="1"></i><b>(1)</b>

		<span class="tok-n">String</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">letters</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">joining</span><span class="tok-o">(</span><span class="tok-s">&quot;,&quot;</span><span class="tok-o">));</span> <i class="conum" data-value="1"></i><b>(1)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">result</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">collectors</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.Map</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.stream.Collectors</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamCollectorsExample8</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">cities</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-s">&quot;toronto&quot;</span><span class="tok-o">,</span><span class="tok-s">&quot;ottawa&quot;</span><span class="tok-o">,</span><span class="tok-s">&quot;montreal&quot;</span><span class="tok-o">,</span><span class="tok-s">&quot;vancouver&quot;</span><span class="tok-o">);</span>

		<span class="tok-n">Map</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">,</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;&gt;</span> <span class="tok-n">citiesByLength</span> <span class="tok-o">=</span> <span class="tok-n">cities</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">collect</span><span class="tok-o">(</span>
				<span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">groupingBy</span><span class="tok-o">(</span> <span class="tok-n">city</span> <span class="tok-o">-&gt;</span> <span class="tok-n">city</span><span class="tok-o">.</span><span class="tok-na">length</span><span class="tok-o">()</span> <span class="tok-o">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
				<span class="tok-o">);</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">citiesByLength</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_03</span><span class="tok-o">.</span><span class="tok-na">collectors</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.Map</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.stream.Collectors</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamCollectorsExample9</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">cities</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-s">&quot;toronto&quot;</span><span class="tok-o">,</span><span class="tok-s">&quot;ottawa&quot;</span><span class="tok-o">,</span><span class="tok-s">&quot;montreal&quot;</span><span class="tok-o">,</span><span class="tok-s">&quot;vancouver&quot;</span><span class="tok-o">);</span>

		 <span class="tok-n">Map</span><span class="tok-o">&lt;</span><span class="tok-n">Boolean</span><span class="tok-o">,</span> <span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;&gt;</span> <span class="tok-n">partition</span> <span class="tok-o">=</span> <span class="tok-n">cities</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">collect</span><span class="tok-o">(</span>
				<span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">partitioningBy</span><span class="tok-o">(</span><span class="tok-n">city</span> <span class="tok-o">-&gt;</span> <span class="tok-n">city</span><span class="tok-o">.</span><span class="tok-na">length</span><span class="tok-o">()</span> <span class="tok-o">&lt;</span> <span class="tok-mi">7</span><span class="tok-o">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
				<span class="tok-o">);</span>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">partition</span><span class="tok-o">);</span> <i class="conum" data-value="2"></i><b>(2)</b>

	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_intermediate_operations_coding_exercise"><a class="anchor" href="#_intermediate_operations_coding_exercise"></a>5.4.1. Intermediate Operations Coding Exercise</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_04</span><span class="tok-o">.</span><span class="tok-na">intermediate</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamIntermediateExample1</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">filter</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">&lt;</span> <span class="tok-mi">4</span><span class="tok-o">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>
						 <span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span> <i class="conum" data-value="2"></i><b>(2)</b>

	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_04</span><span class="tok-o">.</span><span class="tok-na">intermediate</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.IntSummaryStatistics</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.OptionalDouble</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.stream.Collectors</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamIntermediateExample2</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;Create a new list with 1 added to each item&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">mappedIntegers</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">map</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span> <span class="tok-o">+</span> <span class="tok-mi">1</span><span class="tok-o">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>
						 <span class="tok-o">.</span><span class="tok-na">collect</span><span class="tok-o">(</span><span class="tok-n">Collectors</span><span class="tok-o">.</span><span class="tok-na">toList</span><span class="tok-o">());</span> <i class="conum" data-value="2"></i><b>(2)</b>
		<span class="tok-n">mappedIntegers</span><span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;\nAdd up all the integers in the list&quot;</span><span class="tok-o">);</span>
		<span class="tok-kt">int</span> <span class="tok-n">sum</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">mapToInt</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span><span class="tok-o">).</span><span class="tok-na">sum</span><span class="tok-o">();</span>  <i class="conum" data-value="3"></i><b>(3)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">sum</span><span class="tok-o">);</span>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;\nAverage all the integers&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">OptionalDouble</span> <span class="tok-n">average</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">mapToInt</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span><span class="tok-o">).</span><span class="tok-na">average</span><span class="tok-o">();</span> <i class="conum" data-value="3"></i><b>(3)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">average</span><span class="tok-o">.</span><span class="tok-na">getAsDouble</span><span class="tok-o">());</span>

		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;\nAverage all the integers&quot;</span><span class="tok-o">);</span>
		<span class="tok-n">IntSummaryStatistics</span> <span class="tok-n">stats</span> <span class="tok-o">=</span> <span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">mapToInt</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">x</span><span class="tok-o">).</span><span class="tok-na">summaryStatistics</span><span class="tok-o">();</span> <i class="conum" data-value="4"></i><b>(4)</b>
		<span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-n">stats</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_04</span><span class="tok-o">.</span><span class="tok-na">intermediate</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamIntermediateExample3</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">peek</span><span class="tok-o">(</span><span class="tok-n">x</span> <span class="tok-o">-&gt;</span> <span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">.</span><span class="tok-na">println</span><span class="tok-o">(</span><span class="tok-s">&quot;peek value is &quot;</span> <span class="tok-o">+</span> <span class="tok-n">x</span><span class="tok-o">))</span>  <i class="conum" data-value="1"></i><b>(1)</b>
						 <span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_04</span><span class="tok-o">.</span><span class="tok-na">intermediate</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.io.IOException</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.stream.Stream</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamIntermediateExample4</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-kd">throws</span> <span class="tok-n">IOException</span> <span class="tok-o">{</span>

		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-o">&gt;</span> <span class="tok-n">lines</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-s">&quot;java 8&quot;</span><span class="tok-o">,</span> <span class="tok-s">&quot;streams are cool&quot;</span><span class="tok-o">);</span>

		<span class="tok-n">lines</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">flatMap</span><span class="tok-o">(</span>
				       <span class="tok-n">line</span> <span class="tok-o">-&gt;</span> <span class="tok-o">{</span>  <i class="conum" data-value="1"></i><b>(1)</b>
							<span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">words</span> <span class="tok-o">=</span> <span class="tok-n">line</span><span class="tok-o">.</span><span class="tok-na">split</span><span class="tok-o">(</span><span class="tok-s">&quot; +&quot;</span><span class="tok-o">);</span> <i class="conum" data-value="2"></i><b>(2)</b>
							<span class="tok-k">return</span> <span class="tok-n">Stream</span><span class="tok-o">.</span><span class="tok-na">of</span><span class="tok-o">(</span><span class="tok-n">words</span><span class="tok-o">);</span> <i class="conum" data-value="3"></i><b>(3)</b>
						<span class="tok-o">})</span>
					  <span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);;</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_04</span><span class="tok-o">.</span><span class="tok-na">intermediate</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamIntermediateExample5</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">distinct</span><span class="tok-o">()</span>  <i class="conum" data-value="1"></i><b>(1)</b>
						 <span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_04</span><span class="tok-o">.</span><span class="tok-na">intermediate</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamIntermediateExample6</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">limit</span><span class="tok-o">(</span><span class="tok-mi">3</span><span class="tok-o">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>
						 <span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code class="java language-java"><span class="tok-kn">package</span> <span class="tok-n">com</span><span class="tok-o">.</span><span class="tok-na">example</span><span class="tok-o">.</span><span class="tok-na">java8</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">.</span><span class="tok-na">_04</span><span class="tok-o">.</span><span class="tok-na">intermediate</span><span class="tok-o">;</span>

<span class="tok-kn">import</span> <span class="tok-nn">java.util.Arrays</span><span class="tok-o">;</span>
<span class="tok-kn">import</span> <span class="tok-nn">java.util.List</span><span class="tok-o">;</span>

<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">StreamIntermediateExample7</span> <span class="tok-o">{</span>
	<span class="tok-kd">public</span> <span class="tok-kd">static</span> <span class="tok-kt">void</span> <span class="tok-nf">main</span><span class="tok-o">(</span><span class="tok-n">String</span><span class="tok-o">[]</span> <span class="tok-n">args</span><span class="tok-o">)</span> <span class="tok-o">{</span>
		<span class="tok-n">List</span><span class="tok-o">&lt;</span><span class="tok-n">Integer</span><span class="tok-o">&gt;</span> <span class="tok-n">integers</span> <span class="tok-o">=</span> <span class="tok-n">Arrays</span><span class="tok-o">.</span><span class="tok-na">asList</span><span class="tok-o">(</span><span class="tok-mi">1</span><span class="tok-o">,</span> <span class="tok-mi">2</span><span class="tok-o">,</span> <span class="tok-mi">3</span><span class="tok-o">,</span> <span class="tok-mi">4</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">,</span> <span class="tok-mi">5</span><span class="tok-o">);</span>

		<span class="tok-n">integers</span><span class="tok-o">.</span><span class="tok-na">stream</span><span class="tok-o">().</span><span class="tok-na">skip</span><span class="tok-o">(</span><span class="tok-mi">3</span><span class="tok-o">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>
						 <span class="tok-o">.</span><span class="tok-na">forEach</span><span class="tok-o">(</span><span class="tok-n">System</span><span class="tok-o">.</span><span class="tok-na">out</span><span class="tok-o">::</span><span class="tok-n">println</span><span class="tok-o">);</span>
	<span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_annotation_reflection_enhancements"><a class="anchor" href="#_annotation_reflection_enhancements"></a>6. Annotation &amp; Reflection Enhancements</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_coding_exercise"><a class="anchor" href="#_coding_exercise"></a>6.1. Coding Exercise</h3>

</div>
<div class="sect2">
<h3 id="_generics_enhancements"><a class="anchor" href="#_generics_enhancements"></a>6.2. Generics enhancements</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_coding_exercise_7"><a class="anchor" href="#_coding_exercise_7"></a>7. Coding Exercise</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_concurrency_enhancements"><a class="anchor" href="#_concurrency_enhancements"></a>7.1. Concurrency enhancements</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_coding_exercise_8"><a class="anchor" href="#_coding_exercise_8"></a>8. Coding Exercise</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_date_and_time_apis"><a class="anchor" href="#_date_and_time_apis"></a>9. Date and Time apis</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_api_tour"><a class="anchor" href="#_api_tour"></a>9.1. Api Tour</h3>

</div>
<div class="sect2">
<h3 id="_coding_exercise_9"><a class="anchor" href="#_coding_exercise_9"></a>9.2. Coding Exercise</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_4_0_examples"><a class="anchor" href="#_spring_4_0_examples"></a>10. Spring 4.0 Examples</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_coding_exercise_10"><a class="anchor" href="#_coding_exercise_10"></a>10.1. Coding Exercise</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_glossary"><a class="anchor" href="#_glossary"></a>11. Glossary</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Functional Interface</dt>
<dd>
<p>A java interface with a single method</p>
</dd>
<dt class="hdlist1">Lambda Expression</dt>
<dd>
<p>A expression that is converted to an instance of a functional interface</p>
</dd>
<dt class="hdlist1">Method Reference</dt>
<dd>
<p>A syntax to pass to use an existing method as a function to make a functional interface instance from</p>
</dd>
<dt class="hdlist1">Default Method</dt>
<dd>
<p>An interface method that we provide an implementation for</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>12. References</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>Lambda: A peek under the hood</em> <a href="#UnderTheHood">[UnderTheHood]</a> is a one hour presentation
	by Brain Goetz form Java One 2013 it provides authoritative answers for
	how Java 8 Lambda expression work and the various design tradeoffs that
	were encountered by the developers of Java 8 Lambdas.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="Streams"></a>[Streams] Brian Goetz, Paul Sandoz. (2013, November 25) <em><strong>Java 8 Streams: Lambda in Top Gean</strong></em> [Video File]. Retrieved from <a href="http://parleys.com/play/5251c7d6e4b0a43ac121245b/about">http://parleys.com/play/5251c7d6e4b0a43ac121245b/about</a></p>
</li>
<li>
<p><a id="ProgrammingWithLambda"></a>[ProgrammingWithLambda] Venkat Subramaniam. (2013, October 29) <em><strong>Programming with Lambda Expressions in Java</strong></em> [Video File]. Retrieved from <a href="http://parleys.com/play/524f20d8e4b0a43ac1212391/about">http://parleys.com/play/524f20d8e4b0a43ac1212391/about</a></p>
</li>
<li>
<p><a id="RoadToLambda"></a>[RoadToLambda] Brian Goetz. (2013, December 05) <em><strong>The Road to Lambda</strong></em> [Video File]. Retrieved from <a href="http://parleys.com/play/5250e2fbe4b0c4f11ec57682/about">http://parleys.com/play/5250e2fbe4b0c4f11ec57682/about</a></p>
</li>
<li>
<p><a id="UnderTheHood"></a>[UnderTheHood] Brian Goetz. (2013, October 31) <em><strong>Lambda: A peek under the Hood</strong></em> [Video File]. Retrieved from <a href="http://parleys.com/play/5251c164e4b0a43ac1212459/about">http://parleys.com/play/5251c164e4b0a43ac1212459/about</a></p>
</li>
<li>
<p><a id="LambdasToBytes"></a>[LambdasToBytes] Brian Goetz. (2011, September 15) <em><strong>From Lambdas to Bytecode</strong></em> [Video File]. Retrieved from <a href="http://parleys.com/play/514892290364bc17fc56c318/about">http://parleys.com/play/514892290364bc17fc56c318/about</a></p>
</li>
<li>
<p><a id="TranslatingLambda"></a>[TranslatingLambda] Brian Goetz. (2012, April) <em><strong>Translation of Lambda Expressions</strong></em> [Online Article]. Retrieved from <a href="http://cr.openjdk.java.net/~briangoetz/lambda/lambda-translation.html">http://cr.openjdk.java.net/~briangoetz/lambda/lambda-translation.html</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.1<br>
Last updated 2014-08-07 16:08:10 EDT
</div>
</div>
</body>
</html>